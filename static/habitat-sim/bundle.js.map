{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/get.js","webpack:///./node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/superPropBase.js","webpack:///./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./src/esp/bindings_js/viewer.css?e19d","webpack:///./src/esp/bindings_js/viewer.css","webpack:///./src/esp/bindings_js/bindings.css?96f5","webpack:///./src/esp/bindings_js/bindings.css","webpack:///./src/esp/bindings_js/modules/defaults.js","webpack:///./src/esp/bindings_js/modules/utils.js","webpack:///./src/esp/bindings_js/modules/event_logger.js","webpack:///./src/esp/bindings_js/modules/simenv_embind.js","webpack:///./src/esp/bindings_js/modules/topdown.js","webpack:///./src/esp/bindings_js/modules/object_sensor.js","webpack:///./src/esp/bindings_js/modules/navigate.js","webpack:///./src/esp/bindings_js/modules/web_demo.js","webpack:///./src/esp/bindings_js/modules/vr_demo.js","webpack:///./src/esp/bindings_js/modules/viewer_demo.js","webpack:///./src/esp/bindings_js/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","self","ReferenceError","obj","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arr","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","superPropBase","_get","receiver","Reflect","base","desc","getOwnPropertyDescriptor","subClass","superClass","constructor","_typeof","assertThisInitialized","iterator","memo","isOldIE","Boolean","window","document","all","atob","getTarget","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","list","options","idCountMap","identifiers","item","id","count","concat","index","css","media","sourceMap","references","updater","push","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","join","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","toString","newLastIdentifiers","_i","_index","splice","useSourceMap","this","map","content","cssMapping","sourceMapping","base64","data","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","Array","isArray","_arr","_n","_d","_e","undefined","_s","next","done","err","arrayLikeToArray","minLen","slice","from","test","len","arr2","_setPrototypeOf","api","default","locals","___CSS_LOADER_API_IMPORT___","defaultAgentConfig","height","radius","mass","linearAcceleration","angularAcceleration","Math","PI","linearFriction","angularFriction","coefficientOfRestitution","defaultEpisode","startState","position","rotation","goal","defaultResolution","width","defaultScene","location","href","indexOf","primitiveObjectHandles","fileBasedObjectHandles","fileBasedObjects","objectName","objectHandle","physicsProperties","renderMesh","flythroughReplayTask","flythroughReplayFile","taskFiles","tasks","config","throttle","func","timeout","active","args","arguments","context","apply","setTimeout","buildConfigFromURLParameters","search","substr","split","arg","decodeURIComponent","getRandomInt","max","floor","random","readJSON","url","encoding","contentsRaw","FS","readFile","contents","parse","loadEpisode","episodeConfigPath","task","episodeJSON","episode","episodes","start_position","start_rotation","sceneID","scene_id","objects","buildEpisodeFromJSON","PsiturkEventLogger","psiturk","phase","event","recordTrialData","recordUnstructuredData","SimEnv","agentId","sim","Module","Simulator","pathfinder","getPathFinder","psiTurk","setEpisode","resolution","grippedObjectId","nearestObjectId","gripOffset","selectedAgentId","reset","initialAgentState","getAgent","setState","updateCrossHairNode","getCrosshairPosition","syncObjects","handleRecordTrialData","removeAllObjects","createAgentState","objectLibHandle","addObjectAtLocation","recomputeNavMesh","postion","syncGrippedObject","objectId","addObjectByHandle","setTranslation","convertVec3fToVector3","setObjectMotionType","MotionType","STATIC","existingObjectIds","getExistingObjectIDs","size","removeObject","action","act","agentConfig","createAgentConfig","flipVec2i","sensorSpecifications","addAgent","objectLibIndex","addObject","primitiveObjectIdx","newPosition","getRandomNavigablePoint","fileBasedObjectIdx","getObjectUnderCrosshair","agentTransform","getAgentTransformation","setTransformation","mul","getTranslation","isNavigable","convertVector3ToVec3f","console","log","inverted","getTransformation","KINEMATIC","sensorId","getAgentObservationSpace","obs","getAgentObservation","objectID","getObjectMotionType","motionType","sceneId","transform","translation","getRotation","setRotation","drawBB","setObjectBBDraw","dt","stepWorld","displayObservation","getSemanticScene","getAgentAbsoluteTranslation","state","AgentState","getState","element","crossHairPosition","crossHairPoint","unproject","direction","refPoint","findNearestObjectUnderCrosshair","navMeshSettings","NavMeshSettings","setDefaults","agentRadius","toggleNavMeshVisualization","refObjectId","windowSize","x","y","z","Vector3","dst","getAgentState","src","dv","applyRotation","cartesian_to_polar","v","q","qx","qy","qz","qw","ix","iy","iz","iw","sqrt","atan2","converted","SensorSpec","AgentConfiguration","sensorSpecs","VectorSensorSpec","push_back","createSensorSpec","TopDownMap","pathFinder","canvas","bounds","ctx","getContext","widthComponent","heightComponent","scale","strokeStyle","lineWidth","currentY","Infinity","mapCenterInset","clearRect","putImageData","imageData","createMap","draw","convertPosition","beginPath","moveTo","throttleMs","throttledMoveTo","start","lineTo","stroke","j","min","heightInPixels","widthInPixels","tmp","round","ImageData","stride","increment","point","color","ObjectSensor","searchRect","semanticShape","semanticScene","objectClass","rect","objectIds","categories","categoryIndex","category","getName","getIndex","observation","left","top","right","bottom","maskPixelsIn","maskPixelsOut","inSearchArea","includes","NavigateTask","components","topdown","semanticsEnabled","radarEnabled","keyBindListener","semantic","semanticCtx","getObservationSpace","shape","semanticImageData","createImageData","semanticObservation","Observation","semanticObjects","scopeWidth","scope","offsetWidth","scopeHeight","offsetHeight","scopeInsetX","scopeInsetY","objectSearchRect","objectSensor","onmousedown","handleMouseDown","radar","radarCtx","actions","offsetY","offsetX","semanticData","setStatus","bindKeys","initialized","render","_self","keysWereBound","unbindKeys","replayLines","startTimestamp","replayDuration","replayTimeouts","iLine","line","rawLineParts","timestamp","datumStr","str","needle","replace","replaceAll","datum","delay","replayTimeout","handleKeypress","clearTimeouts","clearTimeout","finalTimeout","finishTrial","text","status","innerHTML","renderRadar","getObservation","rawSemanticBuffer","getData","Uint32Array","buffer","byteOffset","renderTopDown","magnitude","angle","globalAlpha","fillStyle","arc","fill","closePath","distanceToGoal","normalized","targetX","sin","targetY","cos","renderImage","drawBBAroundNearestObject","renderSemanticImage","addPrimitiveObject","addTemplateObject","removeLastObject","grabReleaseObject","step","a","handleAction","preventDefault","addEventListener","removeEventListener","WebDemo","canvasId","initializeTopDown","sceneConfig","SceneConfiguration","scene","SimulatorConfiguration","enablePhysics","physicsConfigFile","simenv","updateAgentConfigWithSensors","getElementById","canvasElement","instruction","runFlythrough","taskConfig","sensorConfigs","uuid","sensorType","SensorType","COLOR","SEMANTIC","channels","updateAgentConfigWithResolution","sensorConfig","currentResolution","useDefaultEpisode","initializeModules","init","VRDemo","fpsId","VRFrameData","fpsElement","setUpVR","navigator","getVRDisplays","then","displays","setupDisplay","display","currentVrDisplay","requestPresent","setupCanvas","renderDisplay","drawVRScene","leftEye","getEyeParameters","rightEye","renderWidth","renderHeight","resetCanvas","vrSceneFrame","requestAnimationFrame","getFrameData","frameData","updateAgentState","submitFrame","updateFPS","agent","prevAgentState","simRotation","simPosition","previousRotation","poseRotation","pose","orientation","posePosition","previousPosition","agentState","currentFramesSkipped","skipFrames","lastPaintTime","current","performance","now","secondsElapsed","fps","toFixed","ViewerDemo","windowResizeEvent","resetCanvasToCurrent","preload","file","splits","createPreloadedFile","preRun","parseInt","defaultPhysConfig","mkdir","emObjHome","objectIdx","taskName","preloadPhysConfig","fileNoExtension","lastIndexOf","mainUrl","moreThanOne","pop","infoSemanticPath","getInfoSemanticUrl","onRuntimeInitialized","demo","vrEnabled","viewerEnabled","webgl2Support","hasWebgl","WebGL2RenderingContext","checkWebgl2Support","message","WebAssembly","instantiate","Uint8Array","of","Instance","checkWebAssemblySupport","warningElement","className","checkSupport"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 23);\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./viewer.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".viewer-canvas {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  right: 0;\\n  left: 0;\\n  overflow: hidden;\\n}\\n\\n.hidden {\\n  display: hidden;\\n}\\n\\n.tooltip {\\n  color: #fff;\\n  background-color: #666;\\n  line-height: 2;\\n  border-radius: 2px;\\n  top: 0;\\n  padding-top: 3px;\\n  padding-bottom: 3px;\\n  position: absolute;\\n  z-index: 100;\\n  text-align: center;\\n  width: 100%;\\n}\\n\\n.mobile-warning {\\n  position: absolute;\\n  bottom: 5px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./bindings.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/** Copyright (c) Facebook, Inc. and its affiliates.\\n *  This source code is licensed under the MIT license found in the\\n *  LICENSE file in the root directory of this source tree.\\n */\\n#radar {\\n  position: absolute;\\n  top: 70%;\\n  left: 50%;\\n  margin-left: -50px;\\n  width: 100;\\n  height: 100;\\n  z-index: 9;\\n  pointer-events: none;\\n  visibility: hidden;\\n}\\n\\n#scope {\\n  position: absolute;\\n  border-color: red;\\n  border-style: dashed;\\n  border-width: 5px;\\n  opacity: 0.4;\\n  top: 50%;\\n  left: 50%;\\n  margin-left: -160px;\\n  margin-top: -120px;\\n  width: 320px;\\n  height: 240px;\\n  z-index: 9;\\n  pointer-events: none;\\n}\\n\\n#fps {\\n  text-align: right;\\n  padding-right: 1em;\\n}\\n\\n#warning {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  z-index: 100;\\n  background-color: #fff;\\n  color: #000;\\n}\\n\\n.hidden {\\n  display: none !important;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Copyright (c) Facebook, Inc. and its affiliates.\n// This source code is licensed under the MIT license found in the\n// LICENSE file in the root directory of this source tree.\n\nexport const defaultAgentConfig = {\n  height: 1.5,\n  radius: 0.1,\n  mass: 32.0,\n  linearAcceleration: 20.0,\n  angularAcceleration: 4 * Math.PI,\n  linearFriction: 0.5,\n  angularFriction: 1.0,\n  coefficientOfRestitution: 0.0\n};\n\nexport const defaultStartState = {\n  position: [-1.2676633596420288, 0.2047852873802185, 12.595427513122559],\n  rotation: [0, 0.4536385088584658, 0, 0.8911857849408661]\n};\n\nexport const defaultGoal = {\n  position: [2.2896811962127686, 0.11950381100177765, 16.97636604309082]\n};\n\nexport const defaultEpisode = {\n  startState: defaultStartState,\n  goal: defaultGoal\n};\n\nexport const defaultResolution = { height: 480, width: 640 };\n\nexport const defaultScene =\n  window.location.href.indexOf(\"localhost\") === -1\n    ? \"https://habitat-resources.s3.amazonaws.com/data/scene_datasets/habitat-test-scenes/skokloster-castle.glb\"\n    : \"skokloster-castle.glb\";\n\nexport const infoSemanticFileName = \"info_semantic.json\";\n\nexport const dataHome = \"data/\";\nexport const taskHome = \"data/tasks/\";\nexport const primitiveObjectHandles = [\n  \"cylinderSolid_rings_1_segments_12_halfLen_1_useTexCoords_false_useTangents_false_capEnds_true\"\n];\nexport const fileBasedObjectHandles = [\n  \"/data/objects/sphere.phys_properties.json\",\n  \"/data/objects/chair.phys_properties.json\"\n];\n\nexport const fileBasedObjects = {\n  objects: [\n    {\n      objectName: \"sphere.glb\",\n      objectHandle: \"sphere.phys_properties.json\",\n      physicsProperties: \"test_assets/objects/sphere.phys_properties.json\",\n      renderMesh: \"test_assets/objects/sphere.glb\"\n    },\n    {\n      objectName: \"chair.glb\",\n      objectHandle: \"chair.phys_properties.json\",\n      physicsProperties: \"test_assets/objects/chair.phys_properties.json\",\n      renderMesh: \"test_assets/objects/chair.glb\"\n    }\n  ]\n};\n\nexport const flythroughReplayTask = {\n  name: \"rtask.json\",\n  config: \"tasks/rtask.json\"\n};\n\nexport const flythroughReplayFile = {\n  name: \"flythrough.csv\",\n  location: \"replays/flythrough.csv\"\n};\n\nexport const taskFiles = {\n  tasks: [\n    {\n      name: \"task.json\",\n      config: \"tasks/task.json\"\n    }\n  ]\n};\n","// Copyright (c) Facebook, Inc. and its affiliates.\n// This source code is licensed under the MIT license found in the\n// LICENSE file in the root directory of this source tree.\n\n/* global FS */\n\nimport { infoSemanticFileName, defaultEpisode } from \"./defaults\";\n\n/**\n *\n * @param {function} func Function to be throttled\n * @param {int} timeout Milliseconds interval after which throttle will be called,\n * `func` will be called at least once in the timeout timeframe.\n */\nexport function throttle(func, timeout = 500) {\n  let active = false;\n\n  return function() {\n    const args = arguments;\n    const context = this;\n    if (!active) {\n      func.apply(context, args);\n      active = true;\n      window.setTimeout(() => {\n        active = false;\n      }, timeout);\n    }\n  };\n}\n\n/**\n * Check whether web assembly is supported on the current browser or not.\n * Returns false if not otherwise true.\n */\nexport function checkWebAssemblySupport() {\n  try {\n    if (\n      typeof WebAssembly === \"object\" &&\n      typeof WebAssembly.instantiate === \"function\"\n    ) {\n      const module = new WebAssembly.Module(\n        Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00)\n      );\n      if (module instanceof WebAssembly.Module) {\n        return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n      }\n    }\n  } catch (e) {\n    return false;\n  }\n  return false;\n}\n\n/**\n * Checks for WebGL2 support in current browser.\n * Returns 0 if there is no support, 1 if support is there but disabled otherwise 2.\n */\nexport function checkWebgl2Support() {\n  let canvas;\n  let ctx;\n  let hasWebgl = false;\n\n  try {\n    canvas = document.createElement(\"canvas\");\n    ctx = canvas.getContext(\"webgl\") || canvas.getContext(\"experimental-webgl\");\n  } catch (e) {\n    return;\n  }\n\n  if (ctx !== undefined) {\n    hasWebgl = true;\n  }\n\n  canvas = undefined;\n  if (!hasWebgl) {\n    if (typeof WebGL2RenderingContext !== \"undefined\") {\n      return 1;\n    } else {\n      return 0;\n    }\n  } else {\n    return 2;\n  }\n}\n\nexport function getInfoSemanticUrl(mainUrl) {\n  const splits = mainUrl.split(\"/\");\n  const moreThanOne = splits.length > 1;\n  splits.pop();\n  let infoSemanticPath = infoSemanticFileName;\n  if (moreThanOne) {\n    infoSemanticPath = \"/\" + infoSemanticPath;\n  }\n  return splits.join(\"/\") + infoSemanticPath;\n}\n\nexport function buildConfigFromURLParameters(config = {}) {\n  for (let arg of window.location.search.substr(1).split(\"&\")) {\n    let [key, value] = arg.split(\"=\");\n    if (key && value) {\n      config[key] = decodeURIComponent(value);\n    }\n  }\n  return config;\n}\n\nexport function getRandomInt(max = 5) {\n  return Math.floor(Math.random() * max);\n}\n\nexport function readJSON(url, options = { encoding: \"utf8\" }) {\n  let contentsRaw = FS.readFile(url, { encoding: options[\"encoding\"] });\n  let contents = JSON.parse(contentsRaw);\n  return contents;\n}\n\nexport function buildEpisodeFromJSON(task = \"task.json\") {\n  let episodeJSON = readJSON(task);\n  let episode = {};\n  episode.startState = {};\n  episode.startState.position = episodeJSON.episodes[\"0\"].start_position;\n  episode.startState.rotation = episodeJSON.episodes[\"0\"].start_rotation;\n  episode.sceneID = episodeJSON.episodes[\"0\"].scene_id;\n  episode.objects = episodeJSON.episodes[\"0\"].objects;\n  episode.task = episodeJSON.episodes[\"0\"].task;\n  return episode;\n}\n\nexport function replaceAll(str, needle, replacement) {\n  while (str.indexOf(needle) !== -1) {\n    str = str.replace(needle, replacement);\n  }\n  return str;\n}\n\nexport function loadEpisode(episodeConfigPath) {\n  let episode;\n  if (episodeConfigPath === undefined) {\n    episode = defaultEpisode;\n  } else {\n    episode = buildEpisodeFromJSON(episodeConfigPath);\n  }\n  return episode;\n}\n","/**\n * PsiturkEventLogger class\n */\nclass PsiturkEventLogger {\n  // PUBLIC methods.\n\n  /**\n   * Create navigate task.\n   * @param {SimEnv} sim - simulator\n   */\n  constructor(psiturk) {\n    this.psiturk = psiturk;\n  }\n\n  handleRecordTrialData(phase, event, data) {\n    if (this.psiturk) {\n      this.psiturk.recordTrialData({\n        phase: phase,\n        event: event,\n        data: data\n      });\n    }\n  }\n\n  handleRecordUnstructuredData(key, value) {\n    if (this.psiturk) {\n      this.psiturk.recordUnstructuredData(key, value);\n    }\n  }\n}\n\nexport default PsiturkEventLogger;\n","// Copyright (c) Facebook, Inc. and its affiliates.\n// This source code is licensed under the MIT license found in the\n// LICENSE file in the root directory of this source tree.\n\n/*global Module */\n\nimport { primitiveObjectHandles, fileBasedObjectHandles } from \"./defaults\";\nimport { getRandomInt } from \"./utils\";\nimport PsiturkEventLogger from \"./event_logger\";\n\n/**\n * SimEnv class\n *\n * TODO(aps,msb) - Add support for multiple agents instead of\n * hardcoding 0th one.\n */\nclass SimEnv {\n  // PUBLIC methods.\n\n  /**\n   * Create a simulator.\n   * @param {Object} config - simulator config\n   * @param {Object} episode - episode to run\n   * @param {number} agentId - default agent id\n   */\n  constructor(config, episode = {}, agentId = 0) {\n    this.sim = new Module.Simulator(config);\n    this.pathfinder = this.sim.getPathFinder();\n    this.psiturk = new PsiturkEventLogger(window.psiTurk);\n\n    this.setEpisode(episode);\n\n    this.resolution = null;\n    this.grippedObjectId = -1;\n    this.nearestObjectId = -1;\n    this.gripOffset = null;\n    this.selectedAgentId = agentId;\n  }\n\n  /**\n   * Resets the simulation.\n   */\n  reset() {\n    this.sim.reset();\n    if (this.initialAgentState !== null) {\n      const agent = this.sim.getAgent(this.selectedAgentId);\n      agent.setState(this.initialAgentState, true);\n    }\n    this.updateCrossHairNode(this.getCrosshairPosition());\n    this.syncObjects();\n\n    this.grippedObjectId = -1;\n    this.gripOffset = null;\n    this.psiturk.handleRecordTrialData(\"TEST\", \"simReset\", {});\n  }\n\n  /**\n   * Change selected agent in the simulation.\n   * @param {number} agentId - agent id\n   */\n  changeAgent(agentId) {\n    this.selectedAgentId = agentId;\n  }\n\n  /**\n   * Set episode and initialize agent state.\n   * @param {Object} episode - episode config\n   */\n  setEpisode(episode = {}) {\n    this.removeAllObjects();\n    this.episode = episode;\n    this.initialAgentState = null;\n\n    if (Object.keys(episode).length > 0) {\n      this.initialAgentState = this.createAgentState(episode.startState);\n      let objects = episode.objects;\n      for (let index in objects) {\n        let objectLibHandle = objects[index][\"objectHandle\"];\n        let position = objects[index][\"position\"];\n\n        this.addObjectAtLocation(objectLibHandle, position);\n      }\n      this.recomputeNavMesh();\n    }\n    this.psiturk.handleRecordTrialData(\"TEST\", \"setEpisode\", {\n      episode: episode\n    });\n  }\n\n  /**\n   * Update cross hair node position.\n   */\n  updateCrossHairNode(postion) {\n    this.sim.updateCrossHairNode(postion);\n  }\n\n  /**\n   * Sync objects grabbed by agent to agent body.\n   */\n  syncObjects() {\n    this.sim.syncGrippedObject(this.grippedObjectId);\n  }\n\n  /**\n   * Adds a static object at specific position in simulation.\n   */\n  addObjectAtLocation(objectLibHandle, position) {\n    let objectId = this.addObjectByHandle(objectLibHandle);\n    this.setTranslation(this.convertVec3fToVector3(position), objectId, 0);\n    this.setObjectMotionType(Module.MotionType.STATIC, objectId, 0);\n    return objectId;\n  }\n\n  /**\n   * Remove all existing objects\n   */\n  removeAllObjects() {\n    let existingObjectIds = this.getExistingObjectIDs();\n    for (let index = 0; index < existingObjectIds.size(); index++) {\n      this.removeObject(existingObjectIds.get(index));\n    }\n  }\n\n  /**\n   * Take one step in the simulation.\n   * @param {string} action - action to take\n   */\n  step(action) {\n    const agent = this.sim.getAgent(this.selectedAgentId);\n    agent.act(action);\n  }\n\n  /**\n   * Add an agent to the simulation.\n   * @param {Object} config - agent config\n   */\n  addAgent(config) {\n    let agentConfig = this.createAgentConfig(config);\n    this.resolution = this.flipVec2i(\n      agentConfig.sensorSpecifications.get(0).resolution\n    );\n    return this.sim.addAgent(agentConfig);\n  }\n\n  /**\n   * Adds an instance of the specified object mesh to the environment.\n   * @param {number} objectLibIndex - index of the object's template\n   * @param {number} sceneId - specifies which physical scene to add an object to\n   * @returns {number} object ID or -1 if object was unable to be added\n   */\n  addObject(objectLibIndex) {\n    // using default values for rest of the params\n    return this.sim.addObject(objectLibIndex, null, \"\", 0);\n  }\n\n  /**\n   * Remove an instanced object by ID\n   * @param {number} objectID - index of the object's template\n   * @param {boolean} deleteObjectNode - if true, deletes the object's scene node\n   * @param {boolean} deleteVisualNode - if true, deletes the object's visual node\n   * @param {number} sceneId - specifies which physical scene to remove an object from\n   */\n  removeObject(objectId) {\n    // using default values for rest of the params\n    this.sim.removeObject(objectId, true, true, 0);\n  }\n\n  /**\n   * Adds an instance of the specified object mesh to the environment.\n   * @param {string} objectLibHandle - object's template config/origin handle\n   * @returns {number} object ID or -1 if object was unable to be added\n   */\n  addObjectByHandle(objectLibHandle) {\n    // using default values for rest of the params\n    return this.sim.addObjectByHandle(objectLibHandle, null, \"\", 0);\n  }\n\n  /**\n   * Add a random primitive object to the environment.\n   * @returns {number} object ID or -1 if object was unable to be added\n   */\n  addPrimitiveObject() {\n    let primitiveObjectIdx = getRandomInt(primitiveObjectHandles.length);\n    let objectLibHandle = primitiveObjectHandles[primitiveObjectIdx];\n    let objectId = this.addObjectByHandle(objectLibHandle);\n    let newPosition = this.pathfinder.getRandomNavigablePoint();\n    let position = this.convertVec3fToVector3(newPosition);\n    this.setTranslation(position, objectId, 0);\n    this.setObjectMotionType(Module.MotionType.STATIC, objectId, 0);\n    return objectId;\n  }\n\n  /**\n   * Add a random file based object to the environment.\n   * @returns {number} object ID or -1 if object was unable to be added\n   */\n  addTemplateObject() {\n    let fileBasedObjectIdx = getRandomInt(fileBasedObjectHandles.length);\n    let objectLibHandle = fileBasedObjectHandles[fileBasedObjectIdx];\n    let objectId = this.addObjectByHandle(objectLibHandle);\n    let newPosition = this.pathfinder.getRandomNavigablePoint();\n    let position = this.convertVec3fToVector3(newPosition);\n    this.setTranslation(position, objectId, 0);\n    this.setObjectMotionType(Module.MotionType.STATIC, objectId, 0);\n    return objectId;\n  }\n\n  /**\n   * Add a random primitive object to the environment.\n   * @returns {number} object ID or -1 if object was unable to be added\n   */\n  removeLastObject() {\n    let existingObjectIds = this.getExistingObjectIDs();\n    this.removeObject(existingObjectIds.get(existingObjectIds.size() - 1));\n  }\n\n  /**\n   * Grab or release object under cross hair.\n   * @returns {number} object ID or -1 if object was unable to be added\n   */\n  grabReleaseObject() {\n    let nearestObjectId = this.getObjectUnderCrosshair();\n    let agentTransform = this.getAgentTransformation(0);\n\n    if (this.grippedObjectId != -1) {\n      // already gripped, so let it go\n      this.setTransformation(\n        agentTransform.mul(this.gripOffset),\n        this.grippedObjectId,\n        0\n      );\n\n      let position = this.getTranslation(this.grippedObjectId, 0);\n      let isNav = this.pathfinder.isNavigable(\n        this.convertVector3ToVec3f(position),\n        0.5\n      );\n      // check for collision (apparently this is always true)\n      if (!isNav) {\n        console.log(\"Colliding with object or position is not navigable\");\n        return;\n      }\n\n      this.setObjectMotionType(\n        Module.MotionType.STATIC,\n        this.grippedObjectId,\n        0\n      );\n      this.grippedObjectId = -1;\n    } else if (nearestObjectId != -1) {\n      this.gripOffset = agentTransform\n        .inverted()\n        .mul(this.getTransformation(nearestObjectId, 0));\n      this.setObjectMotionType(Module.MotionType.KINEMATIC, nearestObjectId, 0);\n      this.grippedObjectId = nearestObjectId;\n    } else {\n      return;\n    }\n\n    this.recomputeNavMesh();\n  }\n\n  /**\n   * Get the observation space for a given sensorId.\n   * @param {number} sensorId - id of sensor\n   * @returns {ObservationSpace} observation space of sensor\n   */\n  getObservationSpace(sensorId) {\n    return this.sim.getAgentObservationSpace(this.selectedAgentId, sensorId);\n  }\n\n  /**\n   * Get an observation from the given sensorId.\n   * @param {number} sensorId - id of sensor\n   * @param {Observation} obs - observation is read into this object\n   */\n  getObservation(sensorId, obs) {\n    this.sim.getAgentObservation(this.selectedAgentId, sensorId, obs);\n    return obs;\n  }\n\n  /**\n   * Get the PathFinder for the scene.\n   * @returns {PathFinder} pathFinder of the scene\n   */\n  getPathFinder() {\n    return this.sim.getPathFinder();\n  }\n\n  /**\n   * Get the motion type of an object.\n   * @param {number} objectID - object id identifying the object in sim.existingObjects_\n   * @param {number} sceneID - scene id\n   * @returns {MotionType} object MotionType or ERROR_MOTIONTYPE if query failed\n   */\n  getObjectMotionType(objectID, sceneID) {\n    return this.sim.getObjectMotionType(objectID, sceneID);\n  }\n\n  /**\n   * Set the motion type of an object.\n   * * @param {MotionType} motionType - desired motion type of the object\n   * @param {number} objectID - object id identifying the object in sim.existingObjects_\n   * @param {number} sceneID - scene id\n   * @returns {bool} object MotionType or ERROR_MOTIONTYPE if query failed\n   */\n  setObjectMotionType(motionType, objectID, sceneID) {\n    return this.sim.setObjectMotionType(motionType, objectID, sceneID);\n  }\n\n  /**\n   * Get the IDs of the physics objects instanced in a physical scene.\n   * @param {number} sceneID - scene id\n   * @returns {Array} list of existing object Ids in the scene\n   */\n  getExistingObjectIDs(sceneId = 0) {\n    return this.sim.getExistingObjectIDs(sceneId);\n  }\n\n  /**\n   * Set the 4x4 transformation matrix of an object kinematically.\n   * @param {Magnum::Matrix4} transform - desired 4x4 transform of the object.\n   * @param {number} objectID - object id identifying the object in sim.existingObjects_\n   * @param {number} sceneID - scene id\n   */\n  setTransformation(transform, objectID, sceneID) {\n    this.sim.setTransformation(transform, objectID, sceneID);\n  }\n\n  /**\n   * Get the current 4x4 transformation matrix of an object.\n   * @param {number} objectID - object id identifying the object in sim.existingObjects_\n   * @param {number} sceneID - scene id\n   * @returns {Magnum::Matrix4} 4x4 transform of the object\n   */\n  getTransformation(objectID, sceneID) {\n    return this.sim.getTransformation(objectID, sceneID);\n  }\n\n  /**\n   * Get the current 3D position of an object.\n   * @param {number} objectID - object id identifying the object in sim.existingObjects_\n   * @param {number} sceneID - scene id\n   * @returns {Magnum::Vector3} 3D position of the object\n   */\n  getTranslation(objectID, sceneID) {\n    return this.sim.getTranslation(objectID, sceneID);\n  }\n\n  /**\n   * Set the 3D position of an object kinematically.\n   * @param {Magnum::Vector3} translation - 3D position of the object\n   * @param {number} objectID - object id identifying the object in sim.existingObjects_\n   * @param {number} sceneID - scene id\n   */\n  setTranslation(translation, objectID, sceneID) {\n    this.sim.setTranslation(translation, objectID, sceneID);\n  }\n\n  /**\n   * Get the current orientation of an object.\n   * @param {number} objectID - object id identifying the object in sim.existingObjects_\n   * @param {number} sceneID - scene id\n   * @returns {Magnum::Vector3} quaternion representation of the object's orientation\n   */\n  getRotation(objectID, sceneID) {\n    return this.sim.getRotation(objectID, sceneID);\n  }\n\n  /**\n   * Set the orientation of an object kinematically.\n   * @param {Magnum::Vector3} rotation - desired orientation of the object\n   * @param {number} objectID - object id identifying the object in sim.existingObjects_\n   * @param {number} sceneID - scene id\n   */\n  setRotation(rotation, objectID, sceneID) {\n    this.sim.setRotation(rotation, objectID, sceneID);\n  }\n\n  /**\n   * Turn on/off rendering for the bounding box of the object's visual\n   * component.\n   * @param {boolean} drawBB - whether or not the render the bounding box\n   * @param {number} objectID - object id identifying the object in sim.existingObjects_\n   * @param {number} sceneID - scene id\n   */\n  setObjectBBDraw(drawBB, objectID, sceneID) {\n    this.sim.setObjectBBDraw(drawBB, objectID, sceneID);\n  }\n\n  /**\n   * @param {double} dt - step the physical world forward in time by a desired duration.\n   * @returns {double} world time after step\n   */\n  stepWorld(dt = 1.0 / 60.0) {\n    return this.sim.stepWorld(dt);\n  }\n\n  /**\n   * Display an observation from the given sensorId\n   * to canvas selected as default frame buffer.\n   * @param {number} sensorId - id of sensor\n   */\n  displayObservation(sensorId) {\n    this.sim.displayObservation(0, sensorId);\n  }\n\n  /**\n   * Get the semantic scene.\n   * @returns {SemanticScene} semantic scene\n   */\n  getSemanticScene() {\n    return this.sim.getSemanticScene();\n  }\n\n  getAgent(agentId) {\n    return this.sim.getAgent(agentId);\n  }\n\n  getAgentTransformation(agentId) {\n    return this.sim.getAgentTransformation(agentId);\n  }\n\n  getAgentAbsoluteTranslation(agentId) {\n    return this.sim.getAgentAbsoluteTranslation(agentId);\n  }\n\n  getAgentState() {\n    let state = new Module.AgentState();\n    const agent = this.sim.getAgent(this.selectedAgentId);\n    agent.getState(state);\n    return state;\n  }\n\n  getCrosshairPosition() {\n    let center = this.resolution.map(function(element) {\n      return element * 0.5;\n    });\n    return center;\n  }\n\n  getObjectUnderCrosshair() {\n    let crossHairPosition = this.getCrosshairPosition();\n    let ray = this.unproject(crossHairPosition);\n    let crossHairPoint = ray.direction;\n    let refPoint = this.getAgentAbsoluteTranslation(0);\n\n    let nearestObjectId = this.findNearestObjectUnderCrosshair(\n      0,\n      crossHairPoint,\n      refPoint,\n      this.resolution\n    );\n    return nearestObjectId;\n  }\n\n  drawBBAroundNearestObject() {\n    let objectId = this.getObjectUnderCrosshair();\n    if (objectId == -1) {\n      if (this.nearestObjectId != -1) {\n        this.setObjectBBDraw(false, this.nearestObjectId, 0);\n        this.nearestObjectId = objectId;\n      }\n    } else {\n      if (this.nearestObjectId != -1 && this.nearestObjectId != objectId) {\n        this.setObjectBBDraw(false, this.nearestObjectId, 0);\n      }\n      if (this.nearestObjectId != objectId) {\n        this.nearestObjectId = objectId;\n        this.setObjectBBDraw(true, this.nearestObjectId, 0);\n      }\n    }\n  }\n\n  recomputeNavMesh() {\n    let navMeshSettings = new Module.NavMeshSettings();\n    navMeshSettings.setDefaults();\n    navMeshSettings.agentRadius = 0.3;\n    this.sim.recomputeNavMesh(this.getPathFinder(), navMeshSettings, true);\n  }\n\n  toggleNavMeshVisualization() {\n    this.sim.toggleNavMeshVisualization();\n  }\n\n  findNearestObjectUnderCrosshair(\n    refObjectId,\n    crossHairPoint,\n    refPoint,\n    windowSize\n  ) {\n    return this.sim.findNearestObjectUnderCrosshair(\n      refObjectId,\n      crossHairPoint,\n      refPoint,\n      windowSize,\n      1.0\n    );\n  }\n\n  unproject(crossHairPosition) {\n    return this.sim.unproject(crossHairPosition);\n  }\n\n  convertVector3ToVec3f(position) {\n    let vec3fPosition = [position.x(), position.y(), position.z()];\n    return vec3fPosition;\n  }\n\n  convertVec3fToVector3(position) {\n    let vector3Position = new Module.Vector3(\n      position[0],\n      position[1],\n      position[2]\n    );\n    return vector3Position;\n  }\n\n  flipVec2i(position) {\n    return [position[1], position[0]];\n  }\n\n  /**\n   * Get the distance to goal in polar coordinates.\n   * @returns {Array} [magnitude, clockwise-angle (in radians)]\n   */\n  distanceToGoal() {\n    if (\n      Object.keys(this.episode).length === 0 ||\n      this.episode.goal === undefined\n    ) {\n      return [0, 0];\n    }\n    let dst = this.episode.goal.position;\n    let state = this.getAgentState();\n    let src = state.position;\n    let dv = [dst[0] - src[0], dst[1] - src[1], dst[2] - src[2]];\n    dv = this.applyRotation(dv, state.rotation);\n    return this.cartesian_to_polar(-dv[2], dv[0]);\n  }\n\n  // PRIVATE methods.\n\n  // Rotate vector, v, by quaternion, q.\n  // Result r = q' * v * q where q' is the quaternion conjugate.\n  // http://www.chrobotics.com/library/understanding-quaternions\n  applyRotation(v, q) {\n    let x, y, z;\n    [x, y, z] = v;\n    let qx, qy, qz, qw;\n    [qx, qy, qz, qw] = q;\n\n    // i = q' * v\n    let ix = qw * x - qy * z + qz * y;\n    let iy = qw * y - qz * x + qx * z;\n    let iz = qw * z - qx * y + qy * x;\n    let iw = qx * x + qy * y + qz * z;\n\n    // r = i * q\n    let r = [];\n    r[0] = ix * qw + iw * qx + iy * qz - iz * qy;\n    r[1] = iy * qw + iw * qy + iz * qx - ix * qz;\n    r[2] = iz * qw + iw * qz + ix * qy - iy * qx;\n\n    return r;\n  }\n\n  cartesian_to_polar(x, y) {\n    return [Math.sqrt(x * x + y * y), Math.atan2(y, x)];\n  }\n\n  createSensorSpec(config) {\n    const converted = new Module.SensorSpec();\n    for (let key in config) {\n      let value = config[key];\n      converted[key] = value;\n    }\n    return converted;\n  }\n\n  createAgentConfig(config) {\n    const converted = new Module.AgentConfiguration();\n    for (let key in config) {\n      let value = config[key];\n      if (key === \"sensorSpecifications\") {\n        const sensorSpecs = new Module.VectorSensorSpec();\n        for (let c of value) {\n          sensorSpecs.push_back(this.createSensorSpec(c));\n        }\n        value = sensorSpecs;\n      }\n      converted[key] = value;\n    }\n    return converted;\n  }\n\n  createAgentState(state) {\n    const converted = new Module.AgentState();\n    for (let key in state) {\n      let value = state[key];\n      converted[key] = value;\n    }\n    return converted;\n  }\n}\n\nexport default SimEnv;\n","// Copyright (c) Facebook, Inc. and its affiliates.\n// This source code is licensed under the MIT license found in the\n// LICENSE file in the root directory of this source tree.\n\nimport { throttle } from \"./utils\";\n\n/**\n * TopDownMap class\n */\nclass TopDownMap {\n  // PUBLIC methods.\n\n  /**\n   * Create top-down map.\n   * @param {PathFinder} pathFinder - pathFinder used to create map\n   * @param {HTMLCanvasElement} canvas - canvas element for drawing map\n   */\n  constructor(pathFinder, canvas) {\n    this.pathFinder = pathFinder;\n    this.bounds = pathFinder.bounds;\n    this.canvas = canvas;\n    this.ctx = canvas.getContext(\"2d\");\n    this.widthComponent = 0;\n    this.heightComponent = 2;\n    this.scale = 1.0;\n    this.ctx.strokeStyle = \"blue\";\n    this.ctx.lineWidth = 3;\n    this.currentY = -Infinity;\n  }\n\n  /**\n   * Draw the topdown map centered in the canvas.\n   */\n  draw() {\n    const ctx = this.ctx;\n    const canvas = this.canvas;\n    const [x, y] = this.mapCenterInset();\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.putImageData(this.imageData, x, y);\n  }\n\n  /**\n   * Set the start position of the trajectory.\n   * @param {vec3f} position - start position\n   */\n  start(position) {\n    this.currentY = position[1];\n    this.imageData = this.createMap();\n    this.draw();\n    const [x, y] = this.convertPosition(position);\n    this.ctx.beginPath();\n    this.ctx.moveTo(x, y);\n  }\n\n  /**\n   * Update trajectory with new position\n   * @param {vec3f} position - new position\n   * @param {int} throttleMs - time gap for throttle\n   */\n  moveTo(position, throttleMs = 0) {\n    if (throttleMs !== 0) {\n      if (!this.throttledMoveTo) {\n        this.throttledMoveTo = throttle(this.moveTo.bind(this), throttleMs);\n      }\n      this.throttledMoveTo(position);\n    } else {\n      /*\n       * If we've gone up or down a floor, we need to create a new map.\n       * A change in Y of 0.25 should be sufficient as a test.\n       */\n      if (\n        position[1] < this.currentY - 0.25 ||\n        position[1] > this.currentY + 0.25\n      ) {\n        this.start(position);\n      } else {\n        let [x, y] = this.convertPosition(position);\n        this.ctx.lineTo(x, y);\n        this.ctx.stroke();\n      }\n    }\n  }\n\n  // PRIVATE methods.\n\n  /*\n   * We inset the map in order to center it in the canvas.\n   */\n  mapCenterInset() {\n    let x = (this.canvas.width - this.imageData.width) / 2;\n    let y = (this.canvas.height - this.imageData.height) / 2;\n    return [x, y];\n  }\n\n  convertPosition(position) {\n    const i = this.widthComponent;\n    const j = this.heightComponent;\n    let [x, y] = this.mapCenterInset();\n    x += (position[i] - this.bounds.min[i]) * this.scale;\n    y += (position[j] - this.bounds.min[j]) * this.scale;\n    return [x, y];\n  }\n\n  /*\n   * Produces map using a regular grid sampling of navigability.\n   */\n  createMap() {\n    const canvas = this.canvas;\n    let width = this.bounds.max[0] - this.bounds.min[0];\n    let height = this.bounds.max[2] - this.bounds.min[2];\n    let heightInPixels = 0;\n    let widthInPixels = 0;\n\n    // Best-Fit: orient and scale for tightest fit\n    if (\n      (width > height && canvas.width < canvas.height) ||\n      (width < height && canvas.width > canvas.height)\n    ) {\n      this.widthComponent = 2;\n      this.heightComponent = 0;\n      let tmp = width;\n      width = height;\n      height = tmp;\n    }\n    if (height / width > canvas.height / canvas.width) {\n      // Fit height\n      this.scale = canvas.height / height;\n      heightInPixels = canvas.height;\n      widthInPixels = Math.round(width * this.scale - 0.5);\n    } else {\n      // Fit width\n      this.scale = canvas.width / width;\n      widthInPixels = canvas.width;\n      heightInPixels = Math.round(height * this.scale - 0.5);\n    }\n\n    let imageData = new ImageData(widthInPixels, heightInPixels);\n\n    // Create map by painting navigable locations white\n    const stride = 4 * canvas.width;\n    const increment = 1 / this.scale;\n    const color = 0xffffffff;\n    let y = this.bounds.min[this.heightComponent] + increment / 2;\n    let i, j;\n    for (i = 0; i < heightInPixels; i++) {\n      let x = this.bounds.min[this.widthComponent] + increment / 2;\n      for (j = 0; j < widthInPixels; j++) {\n        let point = [0, this.currentY, 0];\n        point[this.widthComponent] = x;\n        point[this.heightComponent] = y;\n        let isNavigable = this.pathFinder.isNavigable(point, 0.5);\n        if (isNavigable) {\n          imageData.data[i * stride + j * 4] = (color >> 24) & 0xff;\n          imageData.data[i * stride + j * 4 + 1] = (color >> 16) & 0xff;\n          imageData.data[i * stride + j * 4 + 2] = (color >> 8) & 0xff;\n          imageData.data[i * stride + j * 4 + 3] = color & 0xff;\n        }\n        x += increment;\n      }\n      y += increment;\n    }\n    return imageData;\n  }\n}\n\nexport default TopDownMap;\n","// Copyright (c) Facebook, Inc. and its affiliates.\n// This source code is licensed under the MIT license found in the\n// LICENSE file in the root directory of this source tree.\n\n/**\n * ObjectSensor class\n */\nclass ObjectSensor {\n  // PUBLIC methods.\n\n  /**\n   * Create a scope for object navigation task.\n   * @param {Object} searchRect - rect for Intersection-over-Union\n   * @param {Object} semanticShape - shape of semantic observation\n   * @param {SemanticScene} semanticScene - semantic information for scene\n   * @param {String} objectClass - class name of object\n   */\n  constructor(searchRect, semanticShape, semanticScene, objectClass) {\n    this.rect = searchRect;\n    this.semanticShape = semanticShape;\n    this.semanticScene = semanticScene;\n    this.objectIds = [];\n\n    const categories = this.semanticScene.categories;\n    const objects = this.semanticScene.objects;\n\n    let categoryIndex = -1;\n    for (let i = 0; i < categories.size(); i++) {\n      const category = categories.get(i);\n      if (category && category.getName(\"\") === objectClass) {\n        categoryIndex = category.getIndex(\"\");\n        break;\n      }\n    }\n    for (let i = 0; i < objects.size(); i++) {\n      const object = objects.get(i) || {};\n      if (object.category && object.category.getIndex(\"\") === categoryIndex) {\n        this.objectIds.push(i);\n      }\n    }\n  }\n\n  /**\n   * Compute IOU for for a given class.\n   * @param {Observation} semanticObservation - observation to search\n   * @param {String} className - object class to search for\n   */\n  computeIOU(observation) {\n    const width = this.semanticShape.get(1);\n    const height = this.semanticShape.get(0);\n    const left = this.rect.left;\n    const top = this.rect.top;\n    const right = this.rect.right;\n    const bottom = this.rect.bottom;\n\n    let maskPixelsIn = 0;\n    let maskPixelsOut = 0;\n    let inSearchArea = false;\n    for (let j = 0; j < height; j++) {\n      inSearchArea = j >= top && j < bottom;\n      for (let i = 0; i < width; i++) {\n        if (this.objectIds.includes(observation[j * width + i])) {\n          if (inSearchArea && i >= left && i < right) {\n            maskPixelsIn++;\n          } else {\n            maskPixelsOut++;\n          }\n        }\n      }\n    }\n    if (maskPixelsIn === 0) {\n      return 0.0;\n    }\n    const rectArea = (bottom - top) * (right - left);\n    return maskPixelsIn / (maskPixelsOut + rectArea);\n  }\n}\n\nexport default ObjectSensor;\n","// Copyright (c) Facebook, Inc. and its affiliates.\n// This source code is licensed under the MIT license found in the\n// LICENSE file in the root directory of this source tree.\n\n/* global FS, Module */\n\nimport ObjectSensor from \"./object_sensor\";\nimport PsiturkEventLogger from \"./event_logger\";\nimport { flythroughReplayFile } from \"./defaults\";\nimport { replaceAll } from \"./utils\";\n\n/**\n * NavigateTask class\n */\nclass NavigateTask {\n  // PUBLIC methods.\n\n  /**\n   * Create navigate task.\n   * @param {SimEnv} sim - simulator\n   * @param {TopDownMap} topdown - TopDown Map\n   * @param {Object} components - dictionary with status and canvas elements\n   */\n  constructor(sim, components) {\n    this.sim = sim;\n    this.components = components;\n    this.topdown = components.topdown;\n    this.semanticsEnabled = false;\n    this.radarEnabled = false;\n    this.keyBindListener = null;\n\n    if (this.components.semantic) {\n      this.semanticsEnabled = true;\n      this.semanticCtx = components.semantic.getContext(\"2d\");\n      this.semanticShape = this.sim.getObservationSpace(\"semantic\").shape;\n      this.semanticImageData = this.semanticCtx.createImageData(\n        this.semanticShape.get(1),\n        this.semanticShape.get(0)\n      );\n      this.semanticObservation = new Module.Observation();\n      this.semanticScene = this.sim.sim.getSemanticScene();\n      this.semanticObjects = this.semanticScene.objects;\n\n      if (window.config.category) {\n        const scopeWidth = this.components.scope.offsetWidth;\n        const scopeHeight = this.components.scope.offsetHeight;\n        const scopeInsetX = (this.components.canvas.width - scopeWidth) / 2;\n        const scopeInsetY = (this.components.canvas.height - scopeHeight) / 2;\n        const objectSearchRect = {\n          left: scopeInsetX,\n          top: scopeInsetY,\n          right: scopeInsetX + scopeWidth,\n          bottom: scopeInsetY + scopeHeight\n        };\n        this.objectSensor = new ObjectSensor(\n          objectSearchRect,\n          this.semanticShape,\n          this.semanticScene,\n          window.config.category\n        );\n      }\n\n      components.canvas.onmousedown = e => {\n        this.handleMouseDown(e);\n      };\n    }\n\n    if (this.components.radar) {\n      this.radarEnabled = true;\n      this.radarCtx = components.radar.getContext(\"2d\");\n    }\n\n    this.psiturk = new PsiturkEventLogger(window.psiTurk);\n\n    this.actions = [\n      { name: \"moveForward\", key: \"w\" },\n      { name: \"turnLeft\", key: \"ArrowLeft\" },\n      { name: \"turnRight\", key: \"ArrowRight\" },\n      { name: \"lookUp\", key: \"ArrowUp\" },\n      { name: \"lookDown\", key: \"ArrowDown\" },\n      { name: \"addPrimitiveObject\", key: \"8\" },\n      { name: \"addTemplateObject\", key: \"o\" },\n      { name: \"removeLastObject\", key: \"9\" },\n      { name: \"grabReleaseObject\", key: \"h\" },\n      { name: \"endPsiturkTask\", key: \"n\" }\n    ];\n  }\n\n  handleMouseDown(event) {\n    const height = this.semanticShape.get(0);\n    const width = this.semanticShape.get(1);\n    const offsetY = height - 1 - event.offsetY; /* flip-Y */\n    const offsetX = event.offsetX;\n    const objectId = this.semanticData[width * offsetY + offsetX];\n    this.setStatus(this.semanticObjects.get(objectId).category.getName(\"\"));\n  }\n\n  /**\n   * Initialize the task. Should be called once.\n   */\n  init() {\n    this.bindKeys();\n    this.psiturk.handleRecordTrialData(\"TEST\", \"simInitialized\", {\n      config: window.config\n    });\n    this.initialized = true;\n  }\n\n  /**\n   * Reset the task.\n   */\n  reset() {\n    this.sim.reset();\n    this.setStatus(\"Ready\");\n    this.render();\n  }\n\n  /**\n   * Runs flythrough for a task\n   */\n  runFlythrough() {\n    this.setStatus(\"Initializing...\");\n    const _self = this;\n    this.psiturk.handleRecordTrialData(\"TEST\", \"flythroughStart\", {});\n\n    const keysWereBound = !!this.keyBindListener;\n    this.unbindKeys();\n\n    // playback speed\n    let speed = 1.0;\n\n    const replayContents = FS.readFile(\n      \"/data/\".concat(flythroughReplayFile.name),\n      {\n        encoding: \"utf8\"\n      }\n    );\n    const replayLines = replayContents.split(/\\r?\\n/);\n\n    let startTimestamp = null;\n    let replayDuration = 0;\n\n    this.replayTimeouts = [];\n    for (let iLine = 0; iLine < replayLines.length; ++iLine) {\n      const line = replayLines[iLine];\n      // Skip empty lines\n      if (line.length === 0) {\n        continue;\n      }\n\n      const rawLineParts = line.split(\",\");\n      const lineParts = rawLineParts.slice(0, 3);\n\n      const timestamp = lineParts[2];\n      let datumStr = rawLineParts.slice(3).join(\",\");\n      if (datumStr[0] == '\"' && datumStr[datumStr.length - 1] == '\"') {\n        // Remove outside quotes\n        datumStr = datumStr.slice(1, datumStr.length - 1);\n        // Replace double quotes with single\n        datumStr = replaceAll(datumStr, '\"\"', '\"');\n      }\n\n      const datum = JSON.parse(datumStr);\n\n      if (!startTimestamp) {\n        startTimestamp = timestamp;\n      }\n\n      const delay = (timestamp - startTimestamp) / speed;\n      const replayTimeout = window.setTimeout(function() {\n        if (datum[\"event\"] === \"simReset\") {\n          _self.reset();\n        } else if (datum[\"event\"] == \"handleKeyPress\") {\n          _self.handleKeypress(datum[\"data\"][\"key\"]);\n        }\n      }, delay);\n      this.replayTimeouts.push(replayTimeout);\n      replayDuration = delay;\n    }\n\n    this.clearTimeouts = function() {\n      this.clearTimeouts = null;\n\n      if (this.replayTimeouts) {\n        for (let i = 0; i < this.replayTimeouts.length; ++i) {\n          const timeout = this.replayTimeouts[i];\n          window.clearTimeout(timeout);\n        }\n        delete this.replayTimeouts;\n      }\n\n      if (keysWereBound) {\n        _self.bindKeys();\n      }\n      _self.setStatus(\"\");\n    };\n\n    const finalTimeout = window.setTimeout(function() {\n      if (typeof this.clearTimeouts === \"function\") {\n        this.clearTimeouts();\n      }\n      window.finishTrial();\n    }, replayDuration + 1);\n\n    this.replayTimeouts.push(finalTimeout);\n    this.psiturk.handleRecordTrialData(\"TEST\", \"flythroughEnd\", {});\n  }\n\n  // PRIVATE methods.\n\n  setStatus(text) {\n    this.components.status.style = \"color:white\";\n    this.components.status.innerHTML = text;\n  }\n\n  setErrorStatus(text) {\n    this.components.status.style = \"color:red\";\n    this.components.status.innerHTML = text;\n  }\n\n  setWarningStatus(text) {\n    this.components.status.style = \"color:orange\";\n    this.components.status.innerHTML = text;\n  }\n\n  setSuccessStatus(text) {\n    this.components.status.style = \"color:green\";\n    this.components.status.innerHTML = text;\n  }\n\n  renderImage() {\n    this.sim.displayObservation(\"rgb\");\n    this.renderRadar();\n  }\n\n  renderSemanticImage() {\n    if (!this.semanticsEnabled || this.semanticObjects.size() == 0) {\n      return;\n    }\n\n    this.sim.getObservation(\"semantic\", this.semanticObservation);\n    const rawSemanticBuffer = this.semanticObservation.getData();\n    const objectIds = new Uint32Array(\n      rawSemanticBuffer.buffer,\n      rawSemanticBuffer.byteOffset,\n      rawSemanticBuffer.length / 4\n    );\n    this.semanticData = objectIds;\n\n    // TOOD(msb) implement a better colorization scheme\n    for (let i = 0; i < objectIds.length; i++) {\n      const objectId = objectIds[i];\n      if (objectId & 1) {\n        this.semanticImageData.data[i * 4] = 255;\n      } else {\n        this.semanticImageData.data[i * 4] = 0;\n      }\n      if (objectId & 2) {\n        this.semanticImageData.data[i * 4 + 1] = 255;\n      } else {\n        this.semanticImageData.data[i * 4 + 1] = 0;\n      }\n      if (objectId & 4) {\n        this.semanticImageData.data[i * 4 + 2] = 255;\n      } else {\n        this.semanticImageData.data[i * 4 + 2] = 0;\n      }\n      this.semanticImageData.data[i * 4 + 3] = 255;\n    }\n\n    this.semanticCtx.putImageData(this.semanticImageData, 0, 0);\n  }\n\n  renderTopDown(options) {\n    if (options.renderTopDown && this.topdown !== null) {\n      this.topdown.moveTo(this.sim.getAgentState().position, 500);\n    }\n  }\n\n  renderRadar() {\n    if (!this.radarEnabled) {\n      return;\n    }\n    const width = 100,\n      height = 100;\n    let radius = width / 2;\n    let centerX = width / 2;\n    let centerY = height / 2;\n    let ctx = this.radarCtx;\n    ctx.clearRect(0, 0, width, height);\n    ctx.globalAlpha = 0.5;\n    // draw circle\n    ctx.fillStyle = \"darkslategray\";\n    ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n    ctx.fill();\n    // draw sector\n    ctx.fillStyle = \"darkgray\";\n    ctx.beginPath();\n    // TODO(msb) Currently 90 degress but should really use fov.\n    ctx.arc(centerX, centerY, radius, (-Math.PI * 3) / 4, -Math.PI / 4);\n    ctx.lineTo(centerX, centerY);\n    ctx.closePath();\n    ctx.fill();\n    // draw target\n    ctx.globalAlpha = 1.0;\n    ctx.beginPath();\n    let magnitude, angle;\n    [magnitude, angle] = this.sim.distanceToGoal();\n    let normalized = magnitude / (magnitude + 1);\n    let targetX = centerX + Math.sin(angle) * radius * normalized;\n    let targetY = centerY - Math.cos(angle) * radius * normalized;\n    ctx.fillStyle = \"maroon\";\n    ctx.arc(targetX, targetY, 3, 0, 2 * Math.PI);\n    ctx.fill();\n  }\n\n  render(options = { renderTopDown: true }) {\n    this.renderImage();\n\n    this.sim.updateCrossHairNode(this.sim.getCrosshairPosition());\n    this.sim.drawBBAroundNearestObject();\n    this.sim.syncObjects();\n\n    this.renderImage();\n    this.renderSemanticImage();\n    this.renderTopDown(options);\n  }\n\n  handleAction(action) {\n    if (action === \"addPrimitiveObject\") {\n      this.sim.addPrimitiveObject();\n    } else if (action === \"addTemplateObject\") {\n      this.sim.addTemplateObject();\n    } else if (action === \"removeLastObject\") {\n      this.sim.removeLastObject();\n    } else if (action == \"grabReleaseObject\") {\n      this.sim.grabReleaseObject();\n    } else if (action == \"endPsiturkTask\") {\n      // end psiturk task\n      if (window.finishTrial) {\n        window.finishTrial();\n      }\n    } else {\n      this.sim.step(action);\n    }\n    this.setStatus(action);\n    this.render();\n  }\n\n  handleKeypress(key) {\n    for (let a of this.actions) {\n      if (key === a.key) {\n        this.handleAction(a.name);\n        break;\n      }\n    }\n  }\n\n  bindKeys() {\n    var _self = this;\n    if (_self.keyBindListener) {\n      console.log(\"Keys already bound. Returning\");\n      return;\n    }\n    _self.keyBindListener = function(event) {\n      event.preventDefault();\n      _self.psiturk.handleRecordTrialData(\"TEST\", \"handleKeyPress\", {\n        key: event.key\n      });\n      _self.handleKeypress(event.key);\n    };\n    document.addEventListener(\"keydown\", _self.keyBindListener, true);\n  }\n\n  unbindKeys() {\n    if (this.keyBindListener) {\n      document.removeEventListener(\"keydown\", this.keyBindListener, true);\n      this.keyBindListener = null;\n    }\n  }\n}\n\nexport default NavigateTask;\n","// Copyright (c) Facebook, Inc. and its affiliates.\n// This source code is licensed under the MIT license found in the\n// LICENSE file in the root directory of this source tree.\n\n/* global Module */\nimport {\n  defaultAgentConfig,\n  defaultEpisode,\n  defaultResolution,\n  flythroughReplayTask\n} from \"./defaults\";\nimport SimEnv from \"./simenv_embind\";\nimport TopDownMap from \"./topdown\";\nimport NavigateTask from \"./navigate\";\nimport { buildConfigFromURLParameters, loadEpisode } from \"./utils\";\n\nclass WebDemo {\n  currentResolution = defaultResolution;\n  constructor(canvasId = \"canvas\") {\n    this.canvasId = canvasId;\n  }\n  initializeModules(\n    agentConfig = defaultAgentConfig,\n    episode = defaultEpisode,\n    initializeTopDown = true\n  ) {\n    this.sceneConfig = new Module.SceneConfiguration();\n    this.sceneConfig.id = Module.scene;\n    this.config = new Module.SimulatorConfiguration();\n    this.config.scene = this.sceneConfig;\n    this.config.enablePhysics = Module.enablePhysics;\n    this.config.physicsConfigFile = Module.physicsConfigFile;\n\n    this.simenv = new SimEnv(this.config, episode, 0);\n\n    agentConfig = this.updateAgentConfigWithSensors({ ...agentConfig });\n\n    this.simenv.addAgent(agentConfig);\n    this.simenv.updateCrossHairNode(this.simenv.resolution);\n\n    if (initializeTopDown) {\n      this.topdown = new TopDownMap(\n        this.simenv.getPathFinder(),\n        document.getElementById(\"topdown\")\n      );\n    } else {\n      this.topdown = null;\n    }\n\n    this.canvasElement = document.getElementById(this.canvasId);\n\n    this.task = new NavigateTask(this.simenv, {\n      topdown: this.topdown,\n      canvas: this.canvasElement,\n      semantic: document.getElementById(\"semantic\"),\n      radar: document.getElementById(\"radar\"),\n      scope: document.getElementById(\"scope\"),\n      status: document.getElementById(\"status\")\n    });\n  }\n\n  setEpisode(episodeConfigPath) {\n    let episode = loadEpisode(episodeConfigPath);\n    let taskInstruction = document.getElementById(\"task-instruction\");\n    taskInstruction.innerHTML =\n      \"<hr> <h1>Task: \" + episode.task.instruction + \"</h1> <hr>\";\n    this.simenv.setEpisode(episode);\n  }\n\n  runFlythrough() {\n    this.setEpisode(\"/data/\".concat(flythroughReplayTask.name));\n    this.task.reset();\n    this.task.runFlythrough();\n  }\n\n  runInit() {\n    this.setEpisode(\"/data/\".concat(window.config.taskConfig.name));\n    this.task.reset();\n  }\n\n  updateAgentConfigWithSensors(agentConfig = defaultAgentConfig) {\n    const sensorConfigs = [\n      {\n        uuid: \"rgb\",\n        sensorType: Module.SensorType.COLOR,\n        resolution: [480, 640]\n      },\n      {\n        uuid: \"semantic\",\n        sensorType: Module.SensorType.SEMANTIC,\n        resolution: [480, 640],\n        channels: 1\n      }\n    ];\n\n    agentConfig.sensorSpecifications = sensorConfigs;\n    agentConfig = this.updateAgentConfigWithResolution(agentConfig);\n\n    return agentConfig;\n  }\n\n  resetCanvas(resolution) {\n    this.canvasElement.width = resolution.width;\n    this.canvasElement.height = resolution.height;\n  }\n\n  updateAgentConfigWithResolution(agentConfig) {\n    agentConfig.sensorSpecifications.forEach(sensorConfig => {\n      sensorConfig.resolution = [\n        this.currentResolution.height,\n        this.currentResolution.width\n      ];\n    });\n\n    return agentConfig;\n  }\n\n  display(agentConfig = defaultAgentConfig, episode = {}) {\n    const config = buildConfigFromURLParameters();\n    if (config.useDefaultEpisode) {\n      episode = defaultEpisode;\n    }\n\n    this.initializeModules(agentConfig, episode);\n\n    this.task.init();\n    this.task.reset();\n  }\n}\n\nexport default WebDemo;\n","// Copyright (c) Facebook, Inc. and its affiliates.\n// This source code is licensed under the MIT license found in the\n// LICENSE file in the root directory of this source tree.\n\n/* global VRFrameData */\nimport WebDemo from \"./web_demo\";\nimport { defaultAgentConfig, defaultEpisode } from \"./defaults\";\n\nclass VRDemo extends WebDemo {\n  normalSceneFrame;\n  vrSceneFrame;\n  fpsElement;\n  lastPaintTime;\n  frameData = new VRFrameData();\n  previousRotation = false;\n  previousPosition = false;\n  currentVrDisplay = false;\n  fps = 0;\n  skipFrames = 60;\n  currentFramesSkipped = 0;\n\n  constructor(canvasId = \"canvas\", fpsId = \"fps\") {\n    super();\n    this.canvasElement = document.getElementById(canvasId);\n    this.fpsElement = document.getElementById(fpsId);\n  }\n\n  display() {\n    this.setUpVR();\n  }\n\n  initializeModules(\n    agentConfig = defaultAgentConfig,\n    episode = defaultEpisode,\n    initializeTopDown = false\n  ) {\n    super.initializeModules(agentConfig, episode, initializeTopDown);\n  }\n\n  setUpVR() {\n    navigator.getVRDisplays().then(displays => {\n      if (displays.length > 0) {\n        this.setupDisplay(displays[0]);\n      } else {\n        console.log(\"VR display not supported by this device\");\n        super.display();\n      }\n    });\n  }\n\n  setupDisplay(display) {\n    this.currentVrDisplay = display;\n    this.currentVrDisplay\n      .requestPresent([\n        {\n          source: this.canvasElement\n        }\n      ])\n      .then(() => this.setupCanvas())\n      .then(() => this.initializeModules())\n      .then(() => this.renderDisplay());\n  }\n\n  renderDisplay() {\n    this.task.reset();\n    this.drawVRScene();\n  }\n\n  setupCanvas() {\n    const leftEye = this.currentVrDisplay.getEyeParameters(\"left\");\n    const rightEye = this.currentVrDisplay.getEyeParameters(\"right\");\n\n    const width = Math.max(leftEye.renderWidth, rightEye.renderWidth) * 2;\n    const height = Math.max(leftEye.renderHeight, rightEye.renderHeight);\n    this.currentResolution = { height, width };\n    this.resetCanvas(this.currentResolution);\n  }\n\n  drawVRScene() {\n    this.vrSceneFrame = this.currentVrDisplay.requestAnimationFrame(\n      this.drawVRScene.bind(this)\n    );\n    this.currentVrDisplay.getFrameData(this.frameData);\n    this.updateAgentState();\n    this.task.render({ renderTopDown: false });\n    this.currentVrDisplay.submitFrame();\n    this.updateFPS();\n  }\n\n  updateAgentState() {\n    const agent = this.simenv.sim.getAgent(this.simenv.selectedAgentId);\n    let prevAgentState = this.simenv.createAgentState({});\n    agent.getState(prevAgentState);\n\n    const simRotation = prevAgentState.rotation.slice();\n    const simPosition = prevAgentState.position.slice();\n\n    if (!this.previousRotation) {\n      this.previousRotation = this.frameData.pose.orientation.slice();\n      this.previousPosition = this.frameData.pose.position.slice();\n    } else {\n      const poseRotation = this.frameData.pose.orientation;\n      const posePosition = this.frameData.pose.position;\n\n      poseRotation.forEach((item, index) => {\n        simRotation[index] += item - this.previousRotation[index];\n      });\n      posePosition.forEach((item, index) => {\n        simPosition[index] += item - this.previousPosition[index];\n      });\n      this.previousRotation = poseRotation.slice();\n      this.previousPosition = posePosition.slice();\n    }\n    let agentState = { position: simPosition, rotation: simRotation };\n    agentState = this.simenv.createAgentState(agentState);\n\n    agent.setState(agentState, true);\n  }\n\n  updateFPS() {\n    if (this.currentFramesSkipped != this.skipFrames) {\n      this.currentFramesSkipped++;\n      return;\n    }\n\n    this.currentFramesSkipped = 0;\n\n    if (!this.lastPaintTime) {\n      this.lastPaintTime = performance.now();\n    } else {\n      const current = performance.now();\n      const secondsElapsed = (current - this.lastPaintTime) / 1000;\n      this.fps = this.skipFrames / secondsElapsed;\n      this.lastPaintTime = current;\n      this.fpsElement.innerHTML = `FPS: ${this.fps.toFixed(2)}`;\n    }\n  }\n}\n\nexport default VRDemo;\n","// Copyright (c) Facebook, Inc. and its affiliates.\n// This source code is licensed under the MIT license found in the\n// LICENSE file in the root directory of this source tree.\n\nimport WebDemo from \"./web_demo\";\nimport \"../viewer.css\";\n\nclass ViewerDemo extends WebDemo {\n  constructor(canvasId = \"canvas\") {\n    super(canvasId);\n    this.canvasElement = document.getElementById(canvasId);\n    window.addEventListener(\"resize\", this.windowResizeEvent.bind(this));\n  }\n\n  initializeModules(...args) {\n    if (args.length === 3) {\n      args[2] = false;\n    } else if (args.length == 2) {\n      args.push(false);\n    }\n    super.initializeModules(...args);\n  }\n  resetCanvasToCurrent() {\n    this.currentResolution = {\n      height: this.canvasElement.offsetHeight,\n      width: this.canvasElement.offsetWidth\n    };\n    // Make sure width for canvas is set properly\n    this.resetCanvas(this.currentResolution);\n  }\n\n  display() {\n    this.resetCanvasToCurrent();\n    super.display();\n  }\n\n  windowResizeEvent() {\n    // TODO: Later add resize handling\n  }\n}\n\nexport default ViewerDemo;\n","// Copyright (c) Facebook, Inc. and its affiliates.\n// This source code is licensed under the MIT license found in the\n// LICENSE file in the root directory of this source tree.\n\n/* global FS, Module */\n\nimport WebDemo from \"./modules/web_demo\";\nimport VRDemo from \"./modules/vr_demo\";\nimport ViewerDemo from \"./modules/viewer_demo\";\nimport {\n  defaultScene,\n  dataHome,\n  fileBasedObjects,\n  taskFiles,\n  flythroughReplayFile,\n  flythroughReplayTask\n} from \"./modules/defaults\";\nimport \"./bindings.css\";\nimport {\n  checkWebAssemblySupport,\n  checkWebgl2Support,\n  getInfoSemanticUrl,\n  buildConfigFromURLParameters,\n  loadEpisode\n} from \"./modules/utils\";\n\nfunction preload(url) {\n  let file = url;\n  if (url.indexOf(\"http\") === 0) {\n    const splits = url.split(\"/\");\n    file = splits[splits.length - 1];\n  }\n  FS.createPreloadedFile(\"/\", file, url, true, false);\n  return file;\n}\n\nfunction preloadPhysConfig(url) {\n  let emDataHome = \"/data\";\n  FS.mkdir(emDataHome);\n\n  let file = url;\n  if (url.indexOf(\"http\") === 0) {\n    const splits = url.split(\"/\");\n    file = splits[splits.length - 1];\n  }\n  FS.createPreloadedFile(emDataHome, file, dataHome.concat(url), true, false);\n\n  let emObjHome = emDataHome.concat(\"/objects\");\n  FS.mkdir(emObjHome);\n\n  // TODO Need to loop through the objects directory on the server (`phys/objects/*`) and put all of the glbs onto the client\n  var objects = fileBasedObjects[\"objects\"];\n  for (let objectIdx in objects) {\n    let objectName = objects[objectIdx][\"objectName\"];\n    let objectHandle = objects[objectIdx][\"objectHandle\"];\n    let physicsProperties = objects[objectIdx][\"physicsProperties\"];\n    let renderMesh = objects[objectIdx][\"renderMesh\"];\n\n    FS.createPreloadedFile(\n      emObjHome,\n      objectName,\n      dataHome.concat(renderMesh),\n      true,\n      false\n    );\n    FS.createPreloadedFile(\n      emObjHome,\n      objectHandle,\n      dataHome.concat(physicsProperties),\n      true,\n      false\n    );\n  }\n\n  // load task config\n  var tasks = taskFiles.tasks;\n  for (let index in tasks) {\n    let taskName = tasks[index][\"name\"];\n    let taskConfig = tasks[index][\"config\"];\n\n    if (taskName == window.config.taskConfig.name) {\n      FS.createPreloadedFile(\n        emDataHome,\n        taskName,\n        dataHome.concat(taskConfig),\n        true,\n        false\n      );\n    }\n  }\n\n  // load replay episode config\n  FS.createPreloadedFile(\n    emDataHome,\n    flythroughReplayTask.name,\n    dataHome.concat(flythroughReplayTask.config),\n    true,\n    false\n  );\n\n  FS.createPreloadedFile(\n    emDataHome,\n    flythroughReplayFile.name,\n    dataHome.concat(flythroughReplayFile.location),\n    true,\n    false\n  );\n\n  return emDataHome.concat(\"/\".concat(file));\n}\n\nModule.preRun.push(() => {\n  let config = {};\n  config.scene = defaultScene;\n  buildConfigFromURLParameters(config);\n\n  window.config = config;\n  window.config.taskConfig = taskFiles[\"tasks\"][parseInt(window.config.task)];\n\n  const scene = config.scene;\n  Module.scene = preload(scene);\n\n  const physicsConfigFile = window.config.defaultPhysConfig;\n  Module.physicsConfigFile = preloadPhysConfig(physicsConfigFile);\n\n  Module.enablePhysics = window.config.enablePhysics === \"true\";\n\n  const fileNoExtension = scene.substr(0, scene.lastIndexOf(\".\"));\n\n  preload(fileNoExtension + \".navmesh\");\n  if (config.semantic === \"mp3d\") {\n    preload(fileNoExtension + \".house\");\n    preload(fileNoExtension + \"_semantic.ply\");\n  } else if (config.semantic === \"replica\") {\n    preload(getInfoSemanticUrl(config.scene));\n  }\n});\n\nModule.onRuntimeInitialized = () => {\n  console.log(\"hsim_bindings initialized\");\n  let demo;\n  if (window.vrEnabled) {\n    if (navigator && navigator.getVRDisplays) {\n      console.log(\"Web VR is supported\");\n      demo = new VRDemo();\n    }\n  } else if (window.viewerEnabled) {\n    demo = new ViewerDemo();\n  }\n\n  if (!demo) {\n    demo = new WebDemo();\n  }\n\n  let episode = loadEpisode(\"/data/\".concat(window.config.taskConfig.name));\n  demo.display(undefined, episode);\n  window.demo = demo;\n};\n\nfunction checkSupport() {\n  const webgl2Support = checkWebgl2Support();\n  let message = \"\";\n\n  if (!webgl2Support) {\n    message = \"WebGL2 is not supported on your browser. \";\n  } else if (webgl2Support === 1) {\n    message = \"WebGL2 is supported on your browser, but not enabled. \";\n  }\n\n  const webasmSupport = checkWebAssemblySupport();\n\n  if (!webasmSupport) {\n    message += \"Web Assembly is not supported in your browser\";\n  }\n\n  if (message.length > 0) {\n    const warningElement = document.getElementById(\"warning\");\n    warningElement.innerHTML = message;\n    // Remove the default hidden class\n    warningElement.className = \"\";\n  }\n}\n\ncheckSupport();\n"],"sourceRoot":""}