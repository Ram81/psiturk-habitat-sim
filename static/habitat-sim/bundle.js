!function(e){var t={};function s(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=23)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function s(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&s(e.prototype,t),o&&s(e,o),e}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}},function(e,t,s){var o=s(12),n=s(13),a=s(14),i=s(16);e.exports=function(e,t){return o(e)||n(e,t)||a(e,t)||i()}},function(e,t){function s(t){return e.exports=s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(t)}e.exports=s},function(e,t,s){var o=s(17);function n(t,s,a){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=n=Reflect.get:e.exports=n=function(e,t,s){var n=o(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(s):a.value}},n(t,s,a||t)}e.exports=n},function(e,t,s){var o=s(18);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}},function(e,t,s){var o=s(9),n=s(2);e.exports=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?n(e):t}},function(e,t){function s(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=s=function(e){return typeof e}:e.exports=s=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(t)}e.exports=s},function(e,t,s){"use strict";var o,n=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},a=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),i=[];function c(e){for(var t=-1,s=0;s<i.length;s++)if(i[s].identifier===e){t=s;break}return t}function r(e,t){for(var s={},o=[],n=0;n<e.length;n++){var a=e[n],r=t.base?a[0]+t.base:a[0],l=s[r]||0,_="".concat(r," ").concat(l);s[r]=l+1;var b=c(_),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==b?(i[b].references++,i[b].updater(d)):i.push({identifier:_,updater:g(d,t),references:1}),o.push(_)}return o}function l(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var n=s.nc;n&&(o.nonce=n)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var _,b=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function d(e,t,s,o){var n=s?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=b(t,n);else{var a=document.createTextNode(n),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function h(e,t,s){var o=s.css,n=s.media,a=s.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),a&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var j=null,u=0;function g(e,t){var s,o,n;if(t.singleton){var a=u++;s=j||(j=l(t)),o=d.bind(null,s,a,!1),n=d.bind(null,s,a,!0)}else s=l(t),o=h.bind(null,s,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var s=r(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<s.length;o++){var n=c(s[o]);i[n].references--}for(var a=r(e,t),l=0;l<s.length;l++){var _=c(s[l]);0===i[_].references&&(i[_].updater(),i.splice(_,1))}s=a}}}},function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s=e[1]||"",o=e[3];if(!o)return s;if(t&&"function"==typeof btoa){var n=(i=o,c=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(r," */")),a=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[s].concat(a).concat([n]).join("\n")}var i,c,r;return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,o){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(o)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(n[i]=!0)}for(var c=0;c<e.length;c++){var r=[].concat(e[c]);o&&n[r[0]]||(s&&(r[2]?r[2]="".concat(s," and ").concat(r[2]):r[2]=s),t.push(r))}},t}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var s=[],o=!0,n=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(o=(i=c.next()).done)&&(s.push(i.value),!t||s.length!==t);o=!0);}catch(e){n=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(n)throw a}}return s}}},function(e,t,s){var o=s(15);e.exports=function(e,t){if(e){if("string"==typeof e)return o(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?o(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,o=new Array(t);s<t;s++)o[s]=e[s];return o}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,s){var o=s(5);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}},function(e,t){function s(t,o){return e.exports=s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(t,o)}e.exports=s},function(e,t,s){var o=s(10),n=s(20);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var a={insert:"head",singleton:!1};o(n,a);e.exports=n.locals||{}},function(e,t,s){(t=s(11)(!1)).push([e.i,".viewer-canvas {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  overflow: hidden;\n}\n\n.hidden {\n  display: hidden;\n}\n\n.tooltip {\n  color: #fff;\n  background-color: #666;\n  line-height: 2;\n  border-radius: 2px;\n  top: 0;\n  padding-top: 3px;\n  padding-bottom: 3px;\n  position: absolute;\n  z-index: 100;\n  text-align: center;\n  width: 100%;\n}\n\n.mobile-warning {\n  position: absolute;\n  bottom: 5px;\n}\n",""]),e.exports=t},function(e,t,s){var o=s(10),n=s(22);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var a={insert:"head",singleton:!1};o(n,a);e.exports=n.locals||{}},function(e,t,s){(t=s(11)(!1)).push([e.i,"/** Copyright (c) Facebook, Inc. and its affiliates.\n *  This source code is licensed under the MIT license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n#radar {\n  position: absolute;\n  top: 70%;\n  left: 50%;\n  margin-left: -50px;\n  width: 100;\n  height: 100;\n  z-index: 9;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n#scope {\n  position: absolute;\n  border-color: red;\n  border-style: dashed;\n  border-width: 5px;\n  opacity: 0.4;\n  top: 50%;\n  left: 50%;\n  margin-left: -160px;\n  margin-top: -120px;\n  width: 320px;\n  height: 240px;\n  z-index: 9;\n  pointer-events: none;\n}\n\n#fps {\n  text-align: right;\n  margin-left: auto;\n  margin-right: auto;\n  width: 800px;\n  font-size: 15pt;\n  font-family: monospace;\n}\n\n#warning {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 100;\n  background-color: #fff;\n  color: #000;\n}\n\n.hidden {\n  display: none !important;\n}\n\n.inventory-center {\n  margin-top: 1.5em;\n  text-align: center;\n}\n",""]),e.exports=t},function(e,t,s){"use strict";s.r(t);var o=s(0),n=s.n(o),a=s(1),i=s.n(a),c=s(3),r=s.n(c),l={height:1.5,radius:.1,mass:32,linearAcceleration:20,angularAcceleration:4*Math.PI,linearFriction:.5,angularFriction:1,coefficientOfRestitution:0},_={startState:{position:[-4.94049,-2.63092,-7.57733],rotation:[0,.980792,0,.195056]},goal:{position:[2.2896811962127686,.11950381100177765,16.97636604309082]}},b={height:480,width:640},d=-1===window.location.href.indexOf("localhost")?"https://habitat-resources.s3.amazonaws.com/data/scene_datasets/habitat-test-scenes/skokloster-castle.glb":"skokloster-castle.glb",h=["cylinderSolid_rings_1_segments_12_halfLen_1_useTexCoords_false_useTangents_false_capEnds_true"],j={objects:[{object:"apple",objectIcon:"/data/test_assets/objects/apple.png",objectHandle:"/data/objects/apple.object_config.json",physicsProperties:"test_assets/objects/apple.object_config.json",renderMesh:"test_assets/objects/apple.glb"},{object:"banana",objectIcon:"/data/test_assets/objects/banana.png",objectHandle:"/data/objects/banana.object_config.json",physicsProperties:"test_assets/objects/banana.object_config.json",renderMesh:"test_assets/objects/banana.glb"},{object:"cracker box",objectIcon:"/data/test_assets/objects/cracker_box.png",objectHandle:"/data/objects/cracker_box.object_config.json",physicsProperties:"test_assets/objects/cracker_box.object_config.json",renderMesh:"test_assets/objects/cracker_box.glb"},{object:"colored wood blocks",objectIcon:"/data/test_assets/objects/colored_wood_blocks.png",objectHandle:"/data/objects/colored_wood_blocks.object_config.json",physicsProperties:"test_assets/objects/colored_wood_blocks.object_config.json",renderMesh:"test_assets/objects/colored_wood_blocks.glb"},{object:"gelatin box",objectIcon:"/data/test_assets/objects/gelatin_box.png",objectHandle:"/data/objects/gelatin_box.object_config.json",physicsProperties:"test_assets/objects/gelatin_box.object_config.json",renderMesh:"test_assets/objects/gelatin_box.glb"},{object:"hammer",objectIcon:"/data/test_assets/objects/hammer.png",objectHandle:"/data/objects/hammer.object_config.json",physicsProperties:"test_assets/objects/hammer.object_config.json",renderMesh:"test_assets/objects/hammer.glb"},{object:"master chef can",objectIcon:"/data/test_assets/objects/master_chef_can.png",objectHandle:"/data/objects/master_chef_can.object_config.json",physicsProperties:"test_assets/objects/master_chef_can.object_config.json",renderMesh:"test_assets/objects/master_chef_can.glb"},{object:"soccer ball",objectIcon:"/data/test_assets/objects/mini_soccer_ball.png",objectHandle:"/data/objects/mini_soccer_ball.object_config.json",physicsProperties:"test_assets/objects/mini_soccer_ball.object_config.json",renderMesh:"test_assets/objects/mini_soccer_ball.glb"},{object:"mustard bottle",objectIcon:"/data/test_assets/objects/mustard_bottle.png",objectHandle:"/data/objects/mustard_bottle.object_config.json",physicsProperties:"test_assets/objects/mustard_bottle.object_config.json",renderMesh:"test_assets/objects/mustard_bottle.glb"},{object:"orange",objectIcon:"/data/test_assets/objects/orange.png",objectHandle:"/data/objects/orange.object_config.json",physicsProperties:"test_assets/objects/orange.object_config.json",renderMesh:"test_assets/objects/orange.glb"},{object:"red bowl",objectIcon:"/data/test_assets/objects/bowl.png",objectHandle:"/data/objects/bowl.object_config.json",physicsProperties:"test_assets/objects/bowl.object_config.json",renderMesh:"test_assets/objects/bowl.glb"},{object:"red mug",objectIcon:"/data/test_assets/objects/mug.png",objectHandle:"/data/objects/mug.object_config.json",physicsProperties:"test_assets/objects/mug.object_config.json",renderMesh:"test_assets/objects/mug.glb"},{object:"red plate",objectIcon:"/data/test_assets/objects/plate.png",objectHandle:"/data/objects/plate.object_config.json",physicsProperties:"test_assets/objects/plate.object_config.json",renderMesh:"test_assets/objects/plate.glb"},{object:"red sphere",objectIcon:"/data/test_assets/objects/sphere.png",objectHandle:"/data/objects/sphere.object_config.json",physicsProperties:"test_assets/objects/sphere.object_config.json",renderMesh:"test_assets/objects/sphere.glb"},{object:"tomato soup can",objectIcon:"/data/test_assets/objects/tomato_soup_can.png",objectHandle:"/data/objects/tomato_soup_can.object_config.json",physicsProperties:"test_assets/objects/tomato_soup_can.object_config.json",renderMesh:"test_assets/objects/tomato_soup_can.glb"},{object:"toy airplane",objectIcon:"/data/test_assets/objects/toy_airplane.png",objectHandle:"/data/objects/toy_airplane.object_config.json",physicsProperties:"test_assets/objects/toy_airplane.object_config.json",renderMesh:"test_assets/objects/toy_airplane.glb"},{object:"wood block",objectIcon:"/data/test_assets/objects/wood_block.png",objectHandle:"/data/objects/wood_block.object_config.json",physicsProperties:"test_assets/objects/wood_block.object_config.json",renderMesh:"test_assets/objects/wood_block.glb"},{object:"large clamp",objectIcon:"/data/test_assets/objects/large_clamp.png",objectHandle:"/data/objects/large_clamp.object_config.json",physicsProperties:"test_assets/objects/large_clamp.object_config.json",renderMesh:"test_assets/objects/large_clamp.glb"},{object:"blue cup",objectIcon:"/data/test_assets/objects/b_cups.png",objectHandle:"/data/objects/b_cups.object_config.json",physicsProperties:"test_assets/objects/b_cups.object_config.json",renderMesh:"test_assets/objects/b_cups.glb"},{object:"green cup",objectIcon:"/data/test_assets/objects/c_cups.png",objectHandle:"/data/objects/c_cups.object_config.json",physicsProperties:"test_assets/objects/c_cups.object_config.json",renderMesh:"test_assets/objects/c_cups.glb"},{object:"baseball",objectIcon:"/data/test_assets/objects/baseball.png",objectHandle:"/data/objects/baseball.object_config.json",physicsProperties:"test_assets/objects/baseball.object_config.json",renderMesh:"test_assets/objects/baseball.glb"},{object:"tennis ball",objectIcon:"/data/test_assets/objects/tennis_ball.png",objectHandle:"/data/objects/tennis_ball.object_config.json",physicsProperties:"test_assets/objects/tennis_ball.object_config.json",renderMesh:"test_assets/objects/tennis_ball.glb"},{object:"blue jug",objectIcon:"/data/test_assets/objects/pitcher_base.png",objectHandle:"/data/objects/pitcher_base.object_config.json",physicsProperties:"test_assets/objects/pitcher_base.object_config.json",renderMesh:"test_assets/objects/pitcher_base.glb"},{object:"potted meat can",objectIcon:"/data/test_assets/objects/potted_meat_can.png",objectHandle:"/data/objects/potted_meat_can.object_config.json",physicsProperties:"test_assets/objects/potted_meat_can.object_config.json",renderMesh:"test_assets/objects/potted_meat_can.glb"},{object:"sugar box",objectIcon:"/data/test_assets/objects/sugar_box.png",objectHandle:"/data/objects/sugar_box.object_config.json",physicsProperties:"test_assets/objects/sugar_box.object_config.json",renderMesh:"test_assets/objects/sugar_box.glb"},{object:"rubiks cube",objectIcon:"/data/test_assets/objects/rubiks_cube.png",objectHandle:"/data/objects/rubiks_cube.object_config.json",physicsProperties:"test_assets/objects/rubiks_cube.object_config.json",renderMesh:"test_assets/objects/rubiks_cube.glb"},{object:"softball",objectIcon:"/data/test_assets/objects/softball.png",objectHandle:"/data/objects/softball.object_config.json",physicsProperties:"test_assets/objects/softball.object_config.json",renderMesh:"test_assets/objects/softball.glb"},{object:"plum",objectIcon:"/data/test_assets/objects/plum.png",objectHandle:"/data/objects/plum.object_config.json",physicsProperties:"test_assets/objects/plum.object_config.json",renderMesh:"test_assets/objects/plum.glb"},{object:"spoon",objectIcon:"/data/test_assets/objects/spoon.png",objectHandle:"/data/objects/spoon.object_config.json",physicsProperties:"test_assets/objects/spoon.object_config.json",renderMesh:"test_assets/objects/spoon.glb"},{object:"blue wood block",objectIcon:"/data/test_assets/objects/b_colored_wood_blocks.png",objectHandle:"/data/objects/b_colored_wood_blocks.object_config.json",physicsProperties:"test_assets/objects/b_colored_wood_blocks.object_config.json",renderMesh:"test_assets/objects/b_colored_wood_blocks.glb"},{object:"fork",objectIcon:"/data/test_assets/objects/fork.png",objectHandle:"/data/objects/fork.object_config.json",physicsProperties:"test_assets/objects/fork.object_config.json",renderMesh:"test_assets/objects/fork.glb"},{object:"knife",objectIcon:"/data/test_assets/objects/knife.png",objectHandle:"/data/objects/knife.object_config.json",physicsProperties:"test_assets/objects/knife.object_config.json",renderMesh:"test_assets/objects/knife.glb"},{object:"red cup",objectIcon:"/data/test_assets/objects/e_cups.png",objectHandle:"/data/objects/e_cups.object_config.json",physicsProperties:"test_assets/objects/e_cups.object_config.json",renderMesh:"test_assets/objects/e_cups.glb"},{object:"yellow cup",objectIcon:"/data/test_assets/objects/d_cups.png",objectHandle:"/data/objects/d_cups.object_config.json",physicsProperties:"test_assets/objects/d_cups.object_config.json",renderMesh:"test_assets/objects/d_cups.glb"},{object:"toy gun",objectIcon:"/data/test_assets/objects/b_toy_airplane.png",objectHandle:"/data/objects/b_toy_airplane.object_config.json",physicsProperties:"test_assets/objects/b_toy_airplane.object_config.json",renderMesh:"test_assets/objects/b_toy_airplane.glb"},{object:"screwdriver",objectIcon:"/data/test_assets/objects/phillips_screwdriver.png",objectHandle:"/data/objects/phillips_screwdriver.object_config.json",physicsProperties:"test_assets/objects/phillips_screwdriver.object_config.json",renderMesh:"test_assets/objects/phillips_screwdriver.glb"},{object:"brown box",objectIcon:"/data/test_assets/objects/foam_brick.png",objectHandle:"/data/objects/foam_brick.object_config.json",physicsProperties:"test_assets/objects/foam_brick.object_config.json",renderMesh:"test_assets/objects/foam_brick.glb"},{object:"purple lego",objectIcon:"/data/test_assets/objects/b_lego_duplo.png",objectHandle:"/data/objects/b_lego_duplo.object_config.json",physicsProperties:"test_assets/objects/b_lego_duplo.object_config.json",renderMesh:"test_assets/objects/b_lego_duplo.glb"},{object:"blue lego",objectIcon:"/data/test_assets/objects/e_lego_duplo.png",objectHandle:"/data/objects/e_lego_duplo.object_config.json",physicsProperties:"test_assets/objects/e_lego_duplo.object_config.json",renderMesh:"test_assets/objects/e_lego_duplo.glb"},{object:"spatula",objectIcon:"/data/test_assets/objects/spatula.png",objectHandle:"/data/objects/spatula.object_config.json",physicsProperties:"test_assets/objects/spatula.object_config.json",renderMesh:"test_assets/objects/spatula.glb"},{object:"wrench",objectIcon:"/data/test_assets/objects/adjustable_wrench.png",objectHandle:"/data/objects/adjustable_wrench.object_config.json",physicsProperties:"test_assets/objects/adjustable_wrench.object_config.json",renderMesh:"test_assets/objects/adjustable_wrench.glb"},{object:"orange cup",objectIcon:"/data/test_assets/objects/a_cups.png",objectHandle:"/data/objects/a_cups.object_config.json",physicsProperties:"test_assets/objects/a_cups.object_config.json",renderMesh:"test_assets/objects/a_cups.glb"},{object:"tuna fish can",objectIcon:"/data/test_assets/objects/tuna_fish_can.png",objectHandle:"/data/objects/tuna_fish_can.object_config.json",physicsProperties:"test_assets/objects/tuna_fish_can.object_config.json",renderMesh:"test_assets/objects/tuna_fish_can.glb"},{object:"power drill",objectIcon:"/data/test_assets/objects/power_drill.png",objectHandle:"/data/objects/power_drill.object_config.json",physicsProperties:"test_assets/objects/power_drill.object_config.json",renderMesh:"test_assets/objects/power_drill.glb"},{object:"green lego",objectIcon:"/data/test_assets/objects/a_lego_duplo.png",objectHandle:"/data/objects/a_lego_duplo.object_config.json",physicsProperties:"test_assets/objects/a_lego_duplo.object_config.json",renderMesh:"test_assets/objects/a_lego_duplo.glb"},{object:"purple cup",objectIcon:"/data/test_assets/objects/f_cups.png",objectHandle:"/data/objects/f_cups.object_config.json",physicsProperties:"test_assets/objects/f_cups.object_config.json",renderMesh:"test_assets/objects/f_cups.glb"},{object:"pear",objectIcon:"/data/test_assets/objects/pear.png",objectHandle:"/data/objects/pear.object_config.json",physicsProperties:"test_assets/objects/pear.object_config.json",renderMesh:"test_assets/objects/pear.glb"},{object:"racquetball",objectIcon:"/data/test_assets/objects/racquetball.png",objectHandle:"/data/objects/racquetball.object_config.json",physicsProperties:"test_assets/objects/racquetball.object_config.json",renderMesh:"test_assets/objects/racquetball.glb"},{object:"scissors",objectIcon:"/data/test_assets/objects/scissors.png",objectHandle:"/data/objects/scissors.object_config.json",physicsProperties:"test_assets/objects/scissors.object_config.json",renderMesh:"test_assets/objects/scissors.glb"},{object:"white bottle",objectIcon:"/data/test_assets/objects/bleach_cleanser.png",objectHandle:"/data/objects/bleach_cleanser.object_config.json",physicsProperties:"test_assets/objects/bleach_cleanser.object_config.json",renderMesh:"test_assets/objects/bleach_cleanser.glb"},{object:"yellow plant pot",objectIcon:"/data/test_assets/objects/Pennington_Electric_Pot_Cabana_4.png",objectHandle:"/data/objects/Pennington_Electric_Pot_Cabana_4.object_config.json",physicsProperties:"test_assets/objects/Pennington_Electric_Pot_Cabana_4.object_config.json",renderMesh:"test_assets/objects/Pennington_Electric_Pot_Cabana_4.glb"},{object:"grey plant pot",objectIcon:"/data/test_assets/objects/Cole_Hardware_Flower_Pot_1025.png",objectHandle:"/data/objects/Cole_Hardware_Flower_Pot_1025.object_config.json",physicsProperties:"test_assets/objects/Cole_Hardware_Flower_Pot_1025.object_config.json",renderMesh:"test_assets/objects/Cole_Hardware_Flower_Pot_1025.glb"},{object:"red coffee mug",objectIcon:"/data/test_assets/objects/ACE_Coffee_Mug_Kristen_16_oz_cup.png",objectHandle:"/data/objects/ACE_Coffee_Mug_Kristen_16_oz_cup.object_config.json",physicsProperties:"test_assets/objects/ACE_Coffee_Mug_Kristen_16_oz_cup.object_config.json",renderMesh:"test_assets/objects/ACE_Coffee_Mug_Kristen_16_oz_cup.glb"},{object:"white tray",objectIcon:"/data/test_assets/objects/Threshold_Tray_Rectangle_Porcelain.png",objectHandle:"/data/objects/Threshold_Tray_Rectangle_Porcelain.object_config.json",physicsProperties:"test_assets/objects/Threshold_Tray_Rectangle_Porcelain.object_config.json",renderMesh:"test_assets/objects/Threshold_Tray_Rectangle_Porcelain.glb"},{object:"spiderman action figure",objectIcon:"/data/test_assets/objects/SpiderMan_Titan_Hero_12Inch_Action_Figure_5Hnn4mtkFsP.png",objectHandle:"/data/objects/SpiderMan_Titan_Hero_12Inch_Action_Figure_5Hnn4mtkFsP.object_config.json",physicsProperties:"test_assets/objects/SpiderMan_Titan_Hero_12Inch_Action_Figure_5Hnn4mtkFsP.object_config.json",renderMesh:"test_assets/objects/SpiderMan_Titan_Hero_12Inch_Action_Figure_5Hnn4mtkFsP.glb"},{object:"toy school bus",objectIcon:"/data/test_assets/objects/SCHOOL_BUS.png",objectHandle:"/data/objects/SCHOOL_BUS.object_config.json",physicsProperties:"test_assets/objects/SCHOOL_BUS.object_config.json",renderMesh:"test_assets/objects/SCHOOL_BUS.glb"},{object:"Squirrel",objectIcon:"/data/test_assets/objects/Squirrel.png",objectHandle:"/data/objects/Squirrel.object_config.json",physicsProperties:"test_assets/objects/Squirrel.object_config.json",renderMesh:"test_assets/objects/Squirrel.glb"},{object:"green toy train",objectIcon:"/data/test_assets/objects/Thomas_Friends_Woodan_Railway_Henry.png",objectHandle:"/data/objects/Thomas_Friends_Woodan_Railway_Henry.object_config.json",physicsProperties:"test_assets/objects/Thomas_Friends_Woodan_Railway_Henry.object_config.json",renderMesh:"test_assets/objects/Thomas_Friends_Woodan_Railway_Henry.glb"},{object:"teapot",objectIcon:"/data/test_assets/objects/Threshold_Porcelain_Teapot_White.png",objectHandle:"/data/objects/Threshold_Porcelain_Teapot_White.object_config.json",physicsProperties:"test_assets/objects/Threshold_Porcelain_Teapot_White.object_config.json",renderMesh:"test_assets/objects/Threshold_Porcelain_Teapot_White.glb"},{object:"chocolate box",objectIcon:"/data/test_assets/objects/KS_Chocolate_Cube_Box_Assortment_By_Neuhaus_2010_Ounces.png",objectHandle:"/data/objects/KS_Chocolate_Cube_Box_Assortment_By_Neuhaus_2010_Ounces.object_config.json",physicsProperties:"test_assets/objects/KS_Chocolate_Cube_Box_Assortment_By_Neuhaus_2010_Ounces.object_config.json",renderMesh:"test_assets/objects/KS_Chocolate_Cube_Box_Assortment_By_Neuhaus_2010_Ounces.glb"},{object:"ramekin",objectIcon:"/data/test_assets/objects/Threshold_Ramekin_White_Porcelain.png",objectHandle:"/data/objects/Threshold_Ramekin_White_Porcelain.object_config.json",physicsProperties:"test_assets/objects/Threshold_Ramekin_White_Porcelain.object_config.json",renderMesh:"test_assets/objects/Threshold_Ramekin_White_Porcelain.glb"},{object:"dixie bowl",objectIcon:"/data/test_assets/objects/Dixie_10_ounce_Bowls_35_ct.png",objectHandle:"/data/objects/Dixie_10_ounce_Bowls_35_ct.object_config.json",physicsProperties:"test_assets/objects/Dixie_10_ounce_Bowls_35_ct.object_config.json",renderMesh:"test_assets/objects/Dixie_10_ounce_Bowls_35_ct.glb"},{object:"red fabric cube",objectIcon:"/data/test_assets/objects/Closetmaid_Premium_Fabric_Cube_Red.png",objectHandle:"/data/objects/Closetmaid_Premium_Fabric_Cube_Red.object_config.json",physicsProperties:"test_assets/objects/Closetmaid_Premium_Fabric_Cube_Red.object_config.json",renderMesh:"test_assets/objects/Closetmaid_Premium_Fabric_Cube_Red.glb"},{object:"green saucer",objectIcon:"/data/test_assets/objects/Ecoforms_Quadra_Saucer_SQ1_Avocado.png",objectHandle:"/data/objects/Ecoforms_Quadra_Saucer_SQ1_Avocado.object_config.json",physicsProperties:"test_assets/objects/Ecoforms_Quadra_Saucer_SQ1_Avocado.object_config.json",renderMesh:"test_assets/objects/Ecoforms_Quadra_Saucer_SQ1_Avocado.glb"},{object:"red orchid pot",objectIcon:"/data/test_assets/objects/Down_To_Earth_Orchid_Pot_Ceramic_Red.png",objectHandle:"/data/objects/Down_To_Earth_Orchid_Pot_Ceramic_Red.object_config.json",physicsProperties:"test_assets/objects/Down_To_Earth_Orchid_Pot_Ceramic_Red.object_config.json",renderMesh:"test_assets/objects/Down_To_Earth_Orchid_Pot_Ceramic_Red.glb"},{object:"blue orchid pot",objectIcon:"/data/test_assets/objects/Down_To_Earth_Ceramic_Orchid_Pot_Asst_Blue.png",objectHandle:"/data/objects/Down_To_Earth_Ceramic_Orchid_Pot_Asst_Blue.object_config.json",physicsProperties:"test_assets/objects/Down_To_Earth_Ceramic_Orchid_Pot_Asst_Blue.object_config.json",renderMesh:"test_assets/objects/Down_To_Earth_Ceramic_Orchid_Pot_Asst_Blue.glb"},{object:"blue dog food bowl",objectIcon:"/data/test_assets/objects/Top_Paw_Dog_Bowl_Blue_Paw_Bone_Ceramic_25_fl_oz_total.png",objectHandle:"/data/objects/Top_Paw_Dog_Bowl_Blue_Paw_Bone_Ceramic_25_fl_oz_total.object_config.json",physicsProperties:"test_assets/objects/Top_Paw_Dog_Bowl_Blue_Paw_Bone_Ceramic_25_fl_oz_total.object_config.json",renderMesh:"test_assets/objects/Top_Paw_Dog_Bowl_Blue_Paw_Bone_Ceramic_25_fl_oz_total.glb"},{object:"toy shark",objectIcon:"/data/test_assets/objects/Weisshai_Great_White_Shark.png",objectHandle:"/data/objects/Weisshai_Great_White_Shark.object_config.json",physicsProperties:"test_assets/objects/Weisshai_Great_White_Shark.object_config.json",renderMesh:"test_assets/objects/Weisshai_Great_White_Shark.glb"},{object:"toy school bus",objectIcon:"/data/test_assets/objects/Sonny_School_Bus.png",objectHandle:"/data/objects/Sonny_School_Bus.object_config.json",physicsProperties:"test_assets/objects/Sonny_School_Bus.object_config.json",renderMesh:"test_assets/objects/Sonny_School_Bus.glb"},{object:"ceramic plate",objectIcon:"/data/test_assets/objects/Threshold_Bistro_Ceramic_Dinner_Plate_Ruby_Ring.png",objectHandle:"/data/objects/Threshold_Bistro_Ceramic_Dinner_Plate_Ruby_Ring.object_config.json",physicsProperties:"test_assets/objects/Threshold_Bistro_Ceramic_Dinner_Plate_Ruby_Ring.object_config.json",renderMesh:"test_assets/objects/Threshold_Bistro_Ceramic_Dinner_Plate_Ruby_Ring.glb"},{object:"turtle toy",objectIcon:"/data/test_assets/objects/Vtech_Roll_Learn_Turtle.png",objectHandle:"/data/objects/Vtech_Roll_Learn_Turtle.object_config.json",physicsProperties:"test_assets/objects/Vtech_Roll_Learn_Turtle.object_config.json",renderMesh:"test_assets/objects/Vtech_Roll_Learn_Turtle.glb"},{object:"blue mug",objectIcon:"/data/test_assets/objects/Cole_Hardware_Mug_Classic_Blue.png",objectHandle:"/data/objects/Cole_Hardware_Mug_Classic_Blue.object_config.json",physicsProperties:"test_assets/objects/Cole_Hardware_Mug_Classic_Blue.object_config.json",renderMesh:"test_assets/objects/Cole_Hardware_Mug_Classic_Blue.glb"},{object:"bookend",objectIcon:"/data/test_assets/objects/Victor_Reversible_Bookend.png",objectHandle:"/data/objects/Victor_Reversible_Bookend.object_config.json",physicsProperties:"test_assets/objects/Victor_Reversible_Bookend.object_config.json",renderMesh:"test_assets/objects/Victor_Reversible_Bookend.glb"},{object:"green toy rail",objectIcon:"/data/test_assets/objects/Thomas_Friends_Wooden_Railway_Porter_5JzRhMm3a9o.png",objectHandle:"/data/objects/Thomas_Friends_Wooden_Railway_Porter_5JzRhMm3a9o.object_config.json",physicsProperties:"test_assets/objects/Thomas_Friends_Wooden_Railway_Porter_5JzRhMm3a9o.object_config.json",renderMesh:"test_assets/objects/Thomas_Friends_Wooden_Railway_Porter_5JzRhMm3a9o.glb"},{object:"dinosaur action figure",objectIcon:"/data/test_assets/objects/Schleich_Spinosaurus_Action_Figure.png",objectHandle:"/data/objects/Schleich_Spinosaurus_Action_Figure.object_config.json",physicsProperties:"test_assets/objects/Schleich_Spinosaurus_Action_Figure.object_config.json",renderMesh:"test_assets/objects/Schleich_Spinosaurus_Action_Figure.glb"},{object:"buzzy bee toy",objectIcon:"/data/test_assets/objects/Fisher_price_Classic_Toys_Buzzy_Bee.png",objectHandle:"/data/objects/Fisher_price_Classic_Toys_Buzzy_Bee.object_config.json",physicsProperties:"test_assets/objects/Fisher_price_Classic_Toys_Buzzy_Bee.object_config.json",renderMesh:"test_assets/objects/Fisher_price_Classic_Toys_Buzzy_Bee.glb"},{object:"toy airplane",objectIcon:"/data/test_assets/objects/TURBOPROP_AIRPLANE_WITH_PILOT.png",objectHandle:"/data/objects/TURBOPROP_AIRPLANE_WITH_PILOT.object_config.json",physicsProperties:"test_assets/objects/TURBOPROP_AIRPLANE_WITH_PILOT.object_config.json",renderMesh:"test_assets/objects/TURBOPROP_AIRPLANE_WITH_PILOT.glb"},{object:"dish drainer",objectIcon:"/data/test_assets/objects/Room_Essentials_Dish_Drainer_Collapsible_White.png",objectHandle:"/data/objects/Room_Essentials_Dish_Drainer_Collapsible_White.object_config.json",physicsProperties:"test_assets/objects/Room_Essentials_Dish_Drainer_Collapsible_White.object_config.json",renderMesh:"test_assets/objects/Room_Essentials_Dish_Drainer_Collapsible_White.glb"},{object:"large ramekin",objectIcon:"/data/test_assets/objects/Utana_5_Porcelain_Ramekin_Large.png",objectHandle:"/data/objects/Utana_5_Porcelain_Ramekin_Large.object_config.json",physicsProperties:"test_assets/objects/Utana_5_Porcelain_Ramekin_Large.object_config.json",renderMesh:"test_assets/objects/Utana_5_Porcelain_Ramekin_Large.glb"},{object:"baking pan",objectIcon:"/data/test_assets/objects/Chef_Style_Round_Cake_Pan_9_inch_pan.png",objectHandle:"/data/objects/Chef_Style_Round_Cake_Pan_9_inch_pan.object_config.json",physicsProperties:"test_assets/objects/Chef_Style_Round_Cake_Pan_9_inch_pan.object_config.json",renderMesh:"test_assets/objects/Chef_Style_Round_Cake_Pan_9_inch_pan.glb"},{object:"android panda figure",objectIcon:"/data/test_assets/objects/Android_Figure_Panda.png",objectHandle:"/data/objects/Android_Figure_Panda.object_config.json",physicsProperties:"test_assets/objects/Android_Figure_Panda.object_config.json",renderMesh:"test_assets/objects/Android_Figure_Panda.glb"},{object:"cole hammer",objectIcon:"/data/test_assets/objects/Cole_Hardware_Hammer_Black.png",objectHandle:"/data/objects/Cole_Hardware_Hammer_Black.object_config.json",physicsProperties:"test_assets/objects/Cole_Hardware_Hammer_Black.object_config.json",renderMesh:"test_assets/objects/Cole_Hardware_Hammer_Black.glb"},{object:"plastic dog food dish",objectIcon:"/data/test_assets/objects/Grreat_Choice_Dog_Double_Dish_Plastic_Blue.png",objectHandle:"/data/objects/Grreat_Choice_Dog_Double_Dish_Plastic_Blue.object_config.json",physicsProperties:"test_assets/objects/Grreat_Choice_Dog_Double_Dish_Plastic_Blue.object_config.json",renderMesh:"test_assets/objects/Grreat_Choice_Dog_Double_Dish_Plastic_Blue.glb"},{object:"porcelain spoon",objectIcon:"/data/test_assets/objects/Threshold_Porcelain_Spoon_Rest_White.png",objectHandle:"/data/objects/Threshold_Porcelain_Spoon_Rest_White.object_config.json",physicsProperties:"test_assets/objects/Threshold_Porcelain_Spoon_Rest_White.object_config.json",renderMesh:"test_assets/objects/Threshold_Porcelain_Spoon_Rest_White.glb"},{object:"puzzle football",objectIcon:"/data/test_assets/objects/Toys_R_Us_Treat_Dispenser_Smart_Puzzle_Foobler.png",objectHandle:"/data/objects/Toys_R_Us_Treat_Dispenser_Smart_Puzzle_Foobler.object_config.json",physicsProperties:"test_assets/objects/Toys_R_Us_Treat_Dispenser_Smart_Puzzle_Foobler.object_config.json",renderMesh:"test_assets/objects/Toys_R_Us_Treat_Dispenser_Smart_Puzzle_Foobler.glb"},{object:"dust pan",objectIcon:"/data/test_assets/objects/Ocedar_Snap_On_Dust_Pan_And_Brush_1_ct.png",objectHandle:"/data/objects/Ocedar_Snap_On_Dust_Pan_And_Brush_1_ct.object_config.json",physicsProperties:"test_assets/objects/Ocedar_Snap_On_Dust_Pan_And_Brush_1_ct.object_config.json",renderMesh:"test_assets/objects/Ocedar_Snap_On_Dust_Pan_And_Brush_1_ct.glb"},{object:"rahzar action figure",objectIcon:"/data/test_assets/objects/Teenage_Mutant_Ninja_Turtles_Rahzar_Action_Figure.png",objectHandle:"/data/objects/Teenage_Mutant_Ninja_Turtles_Rahzar_Action_Figure.object_config.json",physicsProperties:"test_assets/objects/Teenage_Mutant_Ninja_Turtles_Rahzar_Action_Figure.object_config.json",renderMesh:"test_assets/objects/Teenage_Mutant_Ninja_Turtles_Rahzar_Action_Figure.glb"},{object:"toy shark",objectIcon:"/data/test_assets/objects/Shark.png",objectHandle:"/data/objects/Shark.object_config.json",physicsProperties:"test_assets/objects/Shark.object_config.json",renderMesh:"test_assets/objects/Shark.glb"},{object:"lion action figure",objectIcon:"/data/test_assets/objects/Schleich_Lion_Action_Figure.png",objectHandle:"/data/objects/Schleich_Lion_Action_Figure.object_config.json",physicsProperties:"test_assets/objects/Schleich_Lion_Action_Figure.object_config.json",renderMesh:"test_assets/objects/Schleich_Lion_Action_Figure.glb"},{object:"brown bag",objectIcon:"/data/test_assets/objects/INTERNATIONAL_PAPER_Willamette_4_Brown_Bag_500Count.png",objectHandle:"/data/objects/INTERNATIONAL_PAPER_Willamette_4_Brown_Bag_500Count.object_config.json",physicsProperties:"test_assets/objects/INTERNATIONAL_PAPER_Willamette_4_Brown_Bag_500Count.object_config.json",renderMesh:"test_assets/objects/INTERNATIONAL_PAPER_Willamette_4_Brown_Bag_500Count.glb"},{object:"square porcelain plate",objectIcon:"/data/test_assets/objects/Threshold_Dinner_Plate_Square_Rim_White_Porcelain.png",objectHandle:"/data/objects/Threshold_Dinner_Plate_Square_Rim_White_Porcelain.object_config.json",physicsProperties:"test_assets/objects/Threshold_Dinner_Plate_Square_Rim_White_Porcelain.object_config.json",renderMesh:"test_assets/objects/Threshold_Dinner_Plate_Square_Rim_White_Porcelain.glb"},{object:"pink fabric cube",objectIcon:"/data/test_assets/objects/Room_Essentials_Fabric_Cube_Lavender.png",objectHandle:"/data/objects/Room_Essentials_Fabric_Cube_Lavender.object_config.json",physicsProperties:"test_assets/objects/Room_Essentials_Fabric_Cube_Lavender.object_config.json",renderMesh:"test_assets/objects/Room_Essentials_Fabric_Cube_Lavender.glb"},{object:"blue toy train",objectIcon:"/data/test_assets/objects/Thomas_Friends_Wooden_Railway_Talking_Thomas_z7yi7UFHJRj.png",objectHandle:"/data/objects/Thomas_Friends_Wooden_Railway_Talking_Thomas_z7yi7UFHJRj.object_config.json",physicsProperties:"test_assets/objects/Thomas_Friends_Wooden_Railway_Talking_Thomas_z7yi7UFHJRj.object_config.json",renderMesh:"test_assets/objects/Thomas_Friends_Wooden_Railway_Talking_Thomas_z7yi7UFHJRj.glb"},{object:"stack ring toy",objectIcon:"/data/test_assets/objects/Vtech_Stack_Sing_Rings_636_Months.png",objectHandle:"/data/objects/Vtech_Stack_Sing_Rings_636_Months.object_config.json",physicsProperties:"test_assets/objects/Vtech_Stack_Sing_Rings_636_Months.object_config.json",renderMesh:"test_assets/objects/Vtech_Stack_Sing_Rings_636_Months.glb"},{object:"yellow mug",objectIcon:"/data/test_assets/objects/Room_Essentials_Mug_White_Yellow.png",objectHandle:"/data/objects/Room_Essentials_Mug_White_Yellow.object_config.json",physicsProperties:"test_assets/objects/Room_Essentials_Mug_White_Yellow.object_config.json",renderMesh:"test_assets/objects/Room_Essentials_Mug_White_Yellow.glb"},{object:"toy dog",objectIcon:"/data/test_assets/objects/Toysmith_Windem_Up_Flippin_Animals_Dog.png",objectHandle:"/data/objects/Toysmith_Windem_Up_Flippin_Animals_Dog.object_config.json",physicsProperties:"test_assets/objects/Toysmith_Windem_Up_Flippin_Animals_Dog.object_config.json",renderMesh:"test_assets/objects/Toysmith_Windem_Up_Flippin_Animals_Dog.glb"},{object:"android figure",objectIcon:"/data/test_assets/objects/Great_Dinos_Triceratops_Toy.png",objectHandle:"/data/objects/Great_Dinos_Triceratops_Toy.object_config.json",physicsProperties:"test_assets/objects/Great_Dinos_Triceratops_Toy.object_config.json",renderMesh:"test_assets/objects/Great_Dinos_Triceratops_Toy.glb"},{object:"pressure cooker",objectIcon:"/data/test_assets/objects/TriStar_Products_PPC_Power_Pressure_Cooker_XL_in_Black.png",objectHandle:"/data/objects/TriStar_Products_PPC_Power_Pressure_Cooker_XL_in_Black.object_config.json",physicsProperties:"test_assets/objects/TriStar_Products_PPC_Power_Pressure_Cooker_XL_in_Black.object_config.json",renderMesh:"test_assets/objects/TriStar_Products_PPC_Power_Pressure_Cooker_XL_in_Black.glb"},{object:"hair straightener",objectIcon:"/data/test_assets/objects/Remington_TStudio_Silk_Ceramic_Hair_Straightener_2_Inch_Floating_Plates.png",objectHandle:"/data/objects/Remington_TStudio_Silk_Ceramic_Hair_Straightener_2_Inch_Floating_Plates.object_config.json",physicsProperties:"test_assets/objects/Remington_TStudio_Silk_Ceramic_Hair_Straightener_2_Inch_Floating_Plates.object_config.json",renderMesh:"test_assets/objects/Remington_TStudio_Silk_Ceramic_Hair_Straightener_2_Inch_Floating_Plates.glb"},{object:"red saucer",objectIcon:"/data/test_assets/objects/Ecoforms_Plant_Saucer_SQ8COR.png",objectHandle:"/data/objects/Ecoforms_Plant_Saucer_SQ8COR.object_config.json",physicsProperties:"test_assets/objects/Ecoforms_Plant_Saucer_SQ8COR.object_config.json",renderMesh:"test_assets/objects/Ecoforms_Plant_Saucer_SQ8COR.glb"},{object:"storage bin",objectIcon:"/data/test_assets/objects/Curver_Storage_Bin_Black_Small.png",objectHandle:"/data/objects/Curver_Storage_Bin_Black_Small.object_config.json",physicsProperties:"test_assets/objects/Curver_Storage_Bin_Black_Small.object_config.json",renderMesh:"test_assets/objects/Curver_Storage_Bin_Black_Small.glb"},{object:"white pitcher",objectIcon:"/data/test_assets/objects/Threshold_Porcelain_Pitcher_White.png",objectHandle:"/data/objects/Threshold_Porcelain_Pitcher_White.object_config.json",physicsProperties:"test_assets/objects/Threshold_Porcelain_Pitcher_White.object_config.json",renderMesh:"test_assets/objects/Threshold_Porcelain_Pitcher_White.glb"},{object:"pink saucer",objectIcon:"/data/test_assets/objects/Cole_Hardware_Saucer_Electric.png",objectHandle:"/data/objects/Cole_Hardware_Saucer_Electric.object_config.json",physicsProperties:"test_assets/objects/Cole_Hardware_Saucer_Electric.object_config.json",renderMesh:"test_assets/objects/Cole_Hardware_Saucer_Electric.glb"},{object:"white mug",objectIcon:"/data/test_assets/objects/Threshold_Porcelain_Coffee_Mug_All_Over_Bead_White.png",objectHandle:"/data/objects/Threshold_Porcelain_Coffee_Mug_All_Over_Bead_White.object_config.json",physicsProperties:"test_assets/objects/Threshold_Porcelain_Coffee_Mug_All_Over_Bead_White.object_config.json",renderMesh:"test_assets/objects/Threshold_Porcelain_Coffee_Mug_All_Over_Bead_White.glb"},{object:"cereal bowl",objectIcon:"/data/test_assets/objects/Threshold_Bead_Cereal_Bowl_White.png",objectHandle:"/data/objects/Threshold_Bead_Cereal_Bowl_White.object_config.json",physicsProperties:"test_assets/objects/Threshold_Bead_Cereal_Bowl_White.object_config.json",renderMesh:"test_assets/objects/Threshold_Bead_Cereal_Bowl_White.glb"},{object:"flashlight",objectIcon:"/data/test_assets/objects/HeavyDuty_Flashlight.png",objectHandle:"/data/objects/HeavyDuty_Flashlight.object_config.json",physicsProperties:"test_assets/objects/HeavyDuty_Flashlight.object_config.json",renderMesh:"test_assets/objects/HeavyDuty_Flashlight.glb"},{object:"red plastic bowl",objectIcon:"/data/test_assets/objects/Bradshaw_International_11642_7_Qt_MP_Plastic_Bowl.png",objectHandle:"/data/objects/Bradshaw_International_11642_7_Qt_MP_Plastic_Bowl.object_config.json",physicsProperties:"test_assets/objects/Bradshaw_International_11642_7_Qt_MP_Plastic_Bowl.object_config.json",renderMesh:"test_assets/objects/Bradshaw_International_11642_7_Qt_MP_Plastic_Bowl.glb"},{object:"soap dish",objectIcon:"/data/test_assets/objects/Threshold_Bamboo_Ceramic_Soap_Dish.png",objectHandle:"/data/objects/Threshold_Bamboo_Ceramic_Soap_Dish.object_config.json",physicsProperties:"test_assets/objects/Threshold_Bamboo_Ceramic_Soap_Dish.object_config.json",renderMesh:"test_assets/objects/Threshold_Bamboo_Ceramic_Soap_Dish.glb"},{object:"brown hat",objectIcon:"/data/test_assets/objects/DPC_Handmade_Hat_Brown.png",objectHandle:"/data/objects/DPC_Handmade_Hat_Brown.object_config.json",physicsProperties:"test_assets/objects/DPC_Handmade_Hat_Brown.object_config.json",renderMesh:"test_assets/objects/DPC_Handmade_Hat_Brown.glb"},{object:"lime orchid pot",objectIcon:"/data/test_assets/objects/Down_To_Earth_Orchid_Pot_Ceramic_Lime.png",objectHandle:"/data/objects/Down_To_Earth_Orchid_Pot_Ceramic_Lime.object_config.json",physicsProperties:"test_assets/objects/Down_To_Earth_Orchid_Pot_Ceramic_Lime.object_config.json",renderMesh:"test_assets/objects/Down_To_Earth_Orchid_Pot_Ceramic_Lime.glb"},{object:"red butter dish",objectIcon:"/data/test_assets/objects/Cole_Hardware_Butter_Dish_Square_Red.png",objectHandle:"/data/objects/Cole_Hardware_Butter_Dish_Square_Red.object_config.json",physicsProperties:"test_assets/objects/Cole_Hardware_Butter_Dish_Square_Red.object_config.json",renderMesh:"test_assets/objects/Cole_Hardware_Butter_Dish_Square_Red.glb"},{object:"grey dog food bowl",objectIcon:"/data/test_assets/objects/Grreatv_Choice_Dog_Bowl_Gray_Bones_Plastic_20_fl_oz_total.png",objectHandle:"/data/objects/Grreatv_Choice_Dog_Bowl_Gray_Bones_Plastic_20_fl_oz_total.object_config.json",physicsProperties:"test_assets/objects/Grreatv_Choice_Dog_Bowl_Gray_Bones_Plastic_20_fl_oz_total.object_config.json",renderMesh:"test_assets/objects/Grreatv_Choice_Dog_Bowl_Gray_Bones_Plastic_20_fl_oz_total.glb"},{object:"android lego",objectIcon:"/data/test_assets/objects/Android_Lego.png",objectHandle:"/data/objects/Android_Lego.object_config.json",physicsProperties:"test_assets/objects/Android_Lego.object_config.json",renderMesh:"test_assets/objects/Android_Lego.glb"},{object:"utensil holder",objectIcon:"/data/test_assets/objects/BIA_Cordon_Bleu_White_Porcelain_Utensil_Holder_900028.png",objectHandle:"/data/objects/BIA_Cordon_Bleu_White_Porcelain_Utensil_Holder_900028.object_config.json",physicsProperties:"test_assets/objects/BIA_Cordon_Bleu_White_Porcelain_Utensil_Holder_900028.object_config.json",renderMesh:"test_assets/objects/BIA_Cordon_Bleu_White_Porcelain_Utensil_Holder_900028.glb"},{object:"yellow serving bowl",objectIcon:"/data/test_assets/objects/Cole_Hardware_Bowl_Scirocco_YellowBlue.png",objectHandle:"/data/objects/Cole_Hardware_Bowl_Scirocco_YellowBlue.object_config.json",physicsProperties:"test_assets/objects/Cole_Hardware_Bowl_Scirocco_YellowBlue.object_config.json",renderMesh:"test_assets/objects/Cole_Hardware_Bowl_Scirocco_YellowBlue.glb"},{object:"basket",objectIcon:"/data/test_assets/objects/basket.png",objectHandle:"/data/objects/basket.object_config.json",physicsProperties:"test_assets/objects/basket.object_config.json",renderMesh:"test_assets/objects/basket.glb"},{object:"grey hat",objectIcon:"/data/test_assets/objects/grey_hat.png",objectHandle:"/data/objects/grey_hat.object_config.json",physicsProperties:"test_assets/objects/grey_hat.object_config.json",renderMesh:"test_assets/objects/grey_hat.glb"}]},u={name:"replay_task_1.json",config:"tasks/replay_task_1.json"},g={name:"replay_task_1.csv",location:"replays/replay_task_1.csv"},p={tasks:[{name:"task_3.json",config:"tasks/task_3.json",scene:"empty_house.glb",flythroughTask:{name:"replay_task_3.json",config:"tasks/replay_task_3.json"},flythroughReplayFile:{name:"replay_task_3.csv",location:"replays/replay_task_3.csv"},trainingTask:{name:"training_task_3.json",config:"tasks/training_task_3.json"}},{name:"task_4.json",config:"tasks/task_4.json",scene:"empty_house.glb",flythroughTask:{name:"replay_task_3.json",config:"tasks/replay_task_3.json"},flythroughReplayFile:{name:"replay_task_3.csv",location:"replays/replay_task_3.csv"},trainingTask:{name:"training_task_3.json",config:"tasks/training_task_3.json"}},{name:"task_5.json",config:"tasks/task_5.json",scene:"big_house.glb",flythroughTask:{name:"replay_task_3.json",config:"tasks/replay_task_3.json"},flythroughReplayFile:{name:"replay_task_3.csv",location:"replays/replay_task_3.csv"},trainingTask:{name:"training_task_5.json",config:"tasks/training_task_5.json"}},{name:"task_6.json",config:"tasks/task_6.json",scene:"house.glb",flythroughTask:{name:"replay_task_3.json",config:"tasks/replay_task_3.json"},flythroughReplayFile:{name:"replay_task_3.csv",location:"replays/replay_task_3.csv"},trainingTask:{name:"training_task_6.json",config:"tasks/training_task_6.json"}},{name:"task_7.json",config:"tasks/task_7.json",scene:"big_house_2.glb",flythroughTask:{name:"replay_task_3.json",config:"tasks/replay_task_3.json"},flythroughReplayFile:{name:"replay_task_3.csv",location:"replays/replay_task_3.csv"},trainingTask:{name:"training_task_7.json",config:"tasks/training_task_7.json"}},{name:"task_9.json",config:"tasks/task_9.json",scene:"bigger_house.glb",flythroughTask:{name:"replay_task_3.json",config:"tasks/replay_task_3.json"},flythroughReplayFile:{name:"replay_task_3.csv",location:"replays/replay_task_3.csv"},trainingTask:{name:"training_task_9.json",config:"tasks/training_task_9.json"}},{name:"house_4.json",config:"tasks/house_4.json",scene:"house_4.glb",flythroughTask:{name:"replay_task_3.json",config:"tasks/replay_task_3.json"},flythroughReplayFile:{name:"replay_task_3.csv",location:"replays/replay_task_3.csv"},trainingTask:{name:"house_4_training_task.json",config:"tasks/house_4_training_task.json"}},{name:"house_5.json",config:"tasks/house_5.json",scene:"house_5.glb",flythroughTask:{name:"replay_task_3.json",config:"tasks/replay_task_3.json"},flythroughReplayFile:{name:"replay_task_3.csv",location:"replays/replay_task_3.csv"},trainingTask:{name:"house_5_training_task.json",config:"tasks/house_5_training_task.json"}},{name:"house_6.json",config:"tasks/house_6.json",scene:"house_6.glb",flythroughTask:{name:"replay_task_3.json",config:"tasks/replay_task_3.json"},flythroughReplayFile:{name:"replay_task_3.csv",location:"replays/replay_task_3.csv"},trainingTask:{name:"house_6_training_task.json",config:"tasks/house_6_training_task.json"}},{name:"house_8.json",config:"tasks/house_8.json",scene:"house_8.glb",flythroughTask:{name:"replay_task_3.json",config:"tasks/replay_task_3.json"},flythroughReplayFile:{name:"replay_task_3.csv",location:"replays/replay_task_3.csv"},trainingTask:{name:"house_8_training_task.json",config:"tasks/house_8_training_task.json"}},{name:"house_9.json",config:"tasks/house_9.json",scene:"house_9.glb",flythroughTask:{name:"replay_task_3.json",config:"tasks/replay_task_3.json"},flythroughReplayFile:{name:"replay_task_3.csv",location:"replays/replay_task_3.csv"},trainingTask:{name:"house_9_training_task.json",config:"tasks/house_9_training_task.json"}}]},f=s(4),y=s.n(f),m=s(9),v=s.n(m);function k(e,t){var s;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==s.return||s.return()}finally{if(c)throw a}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,o=new Array(t);s<t;s++)o[s]=e[s];return o}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,s=!1;return function(){var o=arguments,n=this;s||(e.apply(n,o),s=!0,window.setTimeout((function(){s=!1}),t))}}function T(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=k(window.location.search.substr(1).split("&"));try{for(s.s();!(e=s.n()).done;){var o=e.value,n=o.split("="),a=y()(n,2),i=a[0],c=a[1];i&&c&&(t[i]=decodeURIComponent(c))}}catch(e){s.e(e)}finally{s.f()}return t}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{encoding:"utf8"},s=FS.readFile(e,{encoding:t.encoding}),o=JSON.parse(s);return o}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"task.json",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",s=S(e),o={startState:{}};return o.episodeID=t,o.startState.position=s.episodes[t].start_position,o.startState.rotation=s.episodes[t].start_rotation,o.sceneID=s.episodes[t].scene_id,o.objects=s.episodes[t].objects,o.task=s.episodes[t].task,o}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";return void 0===e?_:void 0===t?I(e):I(e,t)}var C=function(){function e(t){n()(this,e),this.psiturk=t}return i()(e,[{key:"handleRecordTrialData",value:function(e,t,s){this.psiturk&&0==window.config.disableLogging&&this.psiturk.recordTrialData({phase:e,event:t,data:s})}},{key:"handleRecordUnstructuredData",value:function(e,t){this.psiturk&&0==window.config.disableLogging&&this.psiturk.recordUnstructuredData(e,t)}}]),e}();function M(e,t){var s;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==s.return||s.return()}finally{if(c)throw a}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,o=new Array(t);s<t;s++)o[s]=e[s];return o}var R=function(){function e(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n()(this,e),this.sim=new Module.Simulator(t),this.pathfinder=this.sim.getPathFinder(),this.psiturk=new C(window.psiTurk),this.resolution=null,this.grippedObjectId=-1,this.nearestObjectId=-1,this.gripOffset=null,this.selectedAgentId=o,this.agentObjectHandle=h[0],this.setEpisode(s),this.maxDistance=2,this.objectIndexx=108}return i()(e,[{key:"reset",value:function(){(this.sim.reset(),null!==this.initialAgentState)&&this.sim.getAgent(this.selectedAgentId).setState(this.initialAgentState,!0);this.updateCrossHairNode(this.getCrosshairPosition()),this.grippedObjectId=-1,this.nearestObjectId=-1,this.gripOffset=null,this.psiturk.handleRecordTrialData("TEST","simReset",{})}},{key:"changeAgent",value:function(e){this.selectedAgentId=e}},{key:"setEpisode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.removeAllObjects(),this.episode=e,this.initialAgentState=null,this.objectsInScene=[],Object.keys(e).length>0){this.initialAgentState=this.createAgentState(e.startState),this.sim.addContactTestObject(this.agentObjectHandle,0);var t=JSON.parse(JSON.stringify(e.objects));for(var s in t.sort((function(e,t){var s=e.objectId,o=t.objectId;return s<o?-1:s>o?1:0})),t){var o=t[s].objectHandle,n=this.convertVec3fToVector3(t[s].position),a=this.quatFromCoeffs(t[s].rotation),i=this.addObjectAtLocation(o,n,a);this.addObjectInScene(i,t[s]),this.sim.addContactTestObject(o,0),e.objects[s].simObjectId=i,e.objects[s].prevObjectId=e.objects[s].objectId,e.objects[s].objectId=i}}else this.sim.addContactTestObject(this.agentObjectHandle,0);this.psiturk.handleRecordTrialData("TEST","setEpisode",{episode:e})}},{key:"updateCrossHairNode",value:function(e){this.sim.updateCrossHairNode(e)}},{key:"addObjectInScene",value:function(e,t){var s=JSON.parse(JSON.stringify(t));s.objectId=e,this.objectsInScene.push(s)}},{key:"updateObjectInScene",value:function(e,t){for(var s=0;s<this.objectsInScene.length;s++)if(this.objectsInScene[s].objectId==e){this.objectsInScene[s].objectId=t;break}}},{key:"getObjectFromScene",value:function(e){for(var t=0;t<this.objectsInScene.length;t++)if(this.objectsInScene[t].objectId==e)return this.objectsInScene[t];return null}},{key:"getObjectsInScene",value:function(){return this.objectsInScene}},{key:"syncObjects",value:function(){this.sim.syncGrippedObject(this.grippedObjectId)}},{key:"addObjectAtLocation",value:function(e,t,s){var o=this.addObjectByHandle(e);return this.setTranslation(t,o,0),this.setRotation(s,o,0),this.setObjectMotionType(Module.MotionType.DYNAMIC,o,0),o}},{key:"removeAllObjects",value:function(){for(var e=this.getExistingObjectIDs(),t=e.size()-1;t>=0;t--){var s=e.get(t),o=this.getObjectFromScene(s);this.removeObject(s),this.sim.removeContactTestObject(o.objectHandle,0)}this.sim.clearRecycledObjectIds()}},{key:"step",value:function(e){var t=this.sim.getAgent(this.selectedAgentId),s=this.getAgentTransformation(this.selectedAgentId);return!!this.isAgentColliding(e,s).collision||(t.act(e),!1)}},{key:"addAgent",value:function(e){var t=this.createAgentConfig(e);return this.resolution=this.flipVec2i(t.sensorSpecifications.get(0).resolution),this.sim.addAgent(t)}},{key:"addObject",value:function(e){return this.sim.addObject(e,null,"",0)}},{key:"removeObject",value:function(e){this.sim.removeObject(e,!0,!0,0)}},{key:"addObjectByHandle",value:function(e){return this.sim.addObjectByHandle(e,null,"",0)}},{key:"addPrimitiveObject",value:function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return Math.floor(Math.random()*e)}(h.length),t=h[e],s=this.addObjectByHandle(t),o=this.getAgentTransformation(0).transformPoint(new Module.Vector3(.1,1.5,-1.5));return this.setTranslation(o,s,0),s}},{key:"addTemplateObject",value:function(){var e=this.objectIndexx,t=j.objects[e].objectHandle;console.log(this.objectIndexx+"---"+t);var s=this.addObjectByHandle(t),o=this.getAgentTransformation(0).transformPoint(new Module.Vector3(.1,1.5,-1.5));return this.setTranslation(o,s,0),j.objects[e].isReceptacle=!1,this.addObjectInScene(s,j.objects[e]),this.sim.addContactTestObject(j.objects[e].objectHandle,0),this.objectIndexx+=1,s}},{key:"removeLastObject",value:function(){var e=this.getExistingObjectIDs();e.size()>0&&this.removeObject(e.get(e.size()-1))}},{key:"grabReleaseObject",value:function(){var e=this.getObjectUnderCrosshair(),t=this.getAgentTransformation(0);if(-1!=this.grippedObjectId){this.setTransformation(t.mul(this.gripOffset),this.grippedObjectId,0);var s=this.getTranslation(this.grippedObjectId,0);if(!this.pathfinder.isNavigable(this.convertVector3ToVec3f(s),.5))return void console.log("Colliding with object or position is not navigable");this.setObjectMotionType(Module.MotionType.STATIC,this.grippedObjectId,0),this.grippedObjectId=-1,this.drawBBAroundNearestObject()}else{if(-1==e)return;this.gripOffset=t.inverted().mul(this.getTransformation(e,0)),this.setObjectMotionType(Module.MotionType.KINEMATIC,e,0),this.grippedObjectId=e}this.recomputeNavMesh()}},{key:"inventoryGrabReleaseObject",value:function(){var e=this.getObjectUnderCrosshair().nearestObjectId,t=!1,s=!1,o={};if(-1!=this.grippedObjectId){s=!0;var n=this.findObjectFloorPositionUnderCrosshair(),a=this.getObjectFromScene(this.grippedObjectId),i=this.addObjectByHandle(a.objectHandle);this.setTranslation(n,i,0),this.setObjectMotionType(Module.MotionType.DYNAMIC,i,0),this.updateObjectInScene(this.grippedObjectId,i),o={newObjectTranslation:this.convertVector3ToVec3f(n),newObjectId:i,objectHandle:a.objectHandle,grippedObjectId:this.grippedObjectId},this.grippedObjectId=-1}else if(-1!=e){t=!0,this.grippedObjectTransformation=this.getTransformation(e,0),!0!==this.getObjectFromScene(e).isReceptacle&&(this.removeObject(e,0),this.grippedObjectId=e),o={grippedObjectId:this.grippedObjectId}}return{grabAction:t,releaseAction:s,objectUnderCrosshair:e,grippedObjectId:this.grippedObjectId,nearestObjectId:this.nearestObjectId,actionMeta:o}}},{key:"getObservationSpace",value:function(e){return this.sim.getAgentObservationSpace(this.selectedAgentId,e)}},{key:"getObservation",value:function(e,t){return this.sim.getAgentObservation(this.selectedAgentId,e,t),t}},{key:"getPathFinder",value:function(){return this.sim.getPathFinder()}},{key:"getObjectMotionType",value:function(e,t){return this.sim.getObjectMotionType(e,t)}},{key:"setObjectMotionType",value:function(e,t,s){return this.sim.setObjectMotionType(e,t,s)}},{key:"getExistingObjectIDs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.sim.getExistingObjectIDs(e)}},{key:"setTransformation",value:function(e,t,s){this.sim.setTransformation(e,t,s)}},{key:"getTransformation",value:function(e,t){return this.sim.getTransformation(e,t)}},{key:"getTranslation",value:function(e,t){return this.sim.getTranslation(e,t)}},{key:"setTranslation",value:function(e,t,s){this.sim.setTranslation(e,t,s)}},{key:"getRotation",value:function(e,t){return this.sim.getRotation(e,t)}},{key:"setRotation",value:function(e,t,s){this.sim.setRotation(e,t,s)}},{key:"setObjectBBDraw",value:function(e,t,s){this.sim.setObjectBBDraw(e,t,s)}},{key:"stepWorld",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/60;return this.sim.stepWorld(e)}},{key:"getWorldTime",value:function(){return this.sim.getWorldTime()}},{key:"displayObservation",value:function(e){this.sim.displayObservation(0,e)}},{key:"getSemanticScene",value:function(){return this.sim.getSemanticScene()}},{key:"contactTest",value:function(e){return this.sim.contactTest(e,0)}},{key:"getAgent",value:function(e){return this.sim.getAgent(e)}},{key:"getAgentTransformation",value:function(e){return this.sim.getAgentTransformation(e)}},{key:"getAgentAbsoluteTranslation",value:function(e){return this.sim.getAgentAbsoluteTranslation(e)}},{key:"getAgentRotation",value:function(e){return this.sim.getAgentRotation(e)}},{key:"getAgentSensorSuite",value:function(e){return this.sim.getAgentSensorSuite(e)}},{key:"getAgentState",value:function(){var e=new Module.AgentState;return this.sim.getAgent(this.selectedAgentId).getState(e),e}},{key:"getCrosshairPosition",value:function(){return this.resolution.map((function(e){return.5*e}))}},{key:"getObjectUnderCrosshair",value:function(){var e=this.getCrosshairPosition(),t=this.unproject(e).direction,s=this.getAgentAbsoluteTranslation(0);return{nearestObjectId:this.findNearestObjectUnderCrosshair(t,s,this.resolution),crossHairPoint:this.convertVector3ToVec3f(t),refPoint:this.convertVector3ToVec3f(s),crossHairPosition:e}}},{key:"drawBBAroundNearestObject",value:function(){var e=this.getObjectUnderCrosshair().nearestObjectId;if(-1==e)-1!=this.nearestObjectId&&this.grippedObjectId!=this.nearestObjectId&&(this.setObjectBBDraw(!1,this.nearestObjectId,0),this.nearestObjectId=e);else{if(-1!=this.nearestObjectId&&this.grippedObjectId!=this.nearestObjectId&&(this.setObjectBBDraw(!1,this.nearestObjectId,0),this.nearestObjectId=-1),!0===this.getObjectFromScene(e).isReceptacle)return;this.nearestObjectId!=e&&(this.nearestObjectId=e,this.setObjectBBDraw(!0,this.nearestObjectId,0))}}},{key:"showDropPoint",value:function(){if(-1===this.grippedObjectId){var e=this.getAgentAbsoluteTranslation(0);e=new Module.Vector3(e.x(),e.y()-.5,e.z()),this.updateDropPointNode(e)}else{var t=this.findObjectFloorPositionUnderCrosshair();this.updateDropPointNode(t)}}},{key:"updateDropPointNode",value:function(e){this.sim.updateDropPointNode(e)}},{key:"findObjectFloorPositionUnderCrosshair",value:function(){var e=this.getCrosshairPosition(),t=this.unproject(e).direction,s=this.getAgentTransformation(0),o=this.sim.findFloorPositionUnderCrosshair(t,s,this.resolution,this.maxDistance).point;if(null==o)return!0;var n=o.y();this.grippedObjectTransformation.translation().y()>=n&&(n=this.grippedObjectTransformation.translation().y());for(var a=new Module.Vector3(o.x(),n,o.z()),i=this.getObjectFromScene(this.grippedObjectId),c=this.isCollision(i.objectHandle,a),r=0;c&&r<5;)a=new Module.Vector3(a.x(),a.y()+.25,a.z()),c=this.isCollision(i.objectHandle,a),r+=1;return a}},{key:"sampleObjectState",value:function(e,t){this.sim.sampleObjectState(e,t)}},{key:"recomputeNavMesh",value:function(){var e=new Module.NavMeshSettings;this.sim.recomputeNavMesh(this.getPathFinder(),e,!0)}},{key:"toggleNavMeshVisualization",value:function(){this.sim.setNavMeshVisualization(!0)}},{key:"findNearestObjectUnderCrosshair",value:function(e,t,s){return this.sim.findNearestObjectUnderCrosshair(e,t,s,this.maxDistance)}},{key:"unproject",value:function(e){return this.sim.unproject(e)}},{key:"isAgentColliding",value:function(e,t){if("moveForward"==e){var s=t.backward().mul(-.25),o=t.translation().add(s),n=this.pathfinder.tryStep(t.translation(),o).sub(o),a=o.add(n).add(new Module.Vector3(0,.05,0));return{collision:this.isCollision(this.agentObjectHandle,a,!0),position:a}}if("moveBackward"==e){var i=t.backward().mul(.25),c=t.translation().add(i),r=this.pathfinder.tryStep(t.translation(),c).sub(c),l=c.add(r).add(new Module.Vector3(0,.05,0));return{collision:this.isCollision(this.agentObjectHandle,l,!0),position:l}}return!1}},{key:"isCollision",value:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.sim.preAddContactTest(e,t,s,o)}},{key:"geodesicDistance",value:function(e,t){var s=new Module.ShortestPath;return s.requestedStart=e,s.requestedEnd=t,this.pathfinder.findPath(s),s.geodesicDistance}},{key:"getDistanceBetweenObjects",value:function(e,t){var s=this.getTranslation(e,0),o=this.getTranslation(t,0);return this.geodesicDistance(this.convertVector3ToVec3f(s),this.convertVector3ToVec3f(o))}},{key:"getObjectBBYCoord",value:function(e){return this.sim.getObjectBBYCoord(e)}},{key:"getNumActiveContactPoints",value:function(){return this.sim.getNumActiveContactPoints()}},{key:"getObjectStates",value:function(){for(var e=[],t=this.getExistingObjectIDs(),s=0;s<t.size();s++){var o=t.get(s),n=this.getTranslation(o,0),a=this.getRotation(o,0),i=this.getObjectMotionType(o,0).value,c=this.getObjectFromScene(o),r={objectId:o,translation:this.convertVector3ToVec3f(n),rotation:this.coeffFromQuat(a),motionType:i,objectHandle:c.objectHandle};e.push(r)}return e}},{key:"getAgentPose",value:function(){for(var e=this.getAgentTransformation(this.selectedAgentId).translation(),t=this.getAgentRotation(this.selectedAgentId),s=this.getAgentSensorSuite(this.selectedAgentId),o=s.keys(),n={},a=0;a<o.size();a++){var i=o.get(a),c=s.get(i).rotation(),r=s.get(i).translation();n[i]={rotation:this.coeffFromQuat(c),position:this.convertVector3ToVec3f(r)}}return{position:this.convertVector3ToVec3f(e),rotation:this.coeffFromQuat(t),sensorData:n}}},{key:"getObjectPose",value:function(){var e=this.getObjectUnderCrosshair().nearestObjectId,t=this.getTranslation(e,0),s=this.getRotation(e,0);console.log("object translation: "+this.convertVector3ToVec3f(t)),console.log("object rotation: "+this.coeffFromQuat(s))}},{key:"convertVector3ToVec3f",value:function(e){return[e.x(),e.y(),e.z()]}},{key:"convertVec3fToVector3",value:function(e){return new Module.Vector3(e[0],e[1],e[2])}},{key:"coeffFromQuat",value:function(e){var t=this.convertVector3ToVec3f(e.vector()).slice();return t.push(e.scalar()),t}},{key:"quatFromCoeffs",value:function(e){var t=this.convertVec3fToVector3(e.slice(0,3));return new Module.Quaternion(t,e[3])}},{key:"flipVec2i",value:function(e){return[e[1],e[0]]}},{key:"enableDebugDraw",value:function(){this.sim.enableDebugDraw()}},{key:"dropObjectFromFloor2",value:function(){console.log("dropping object");var e=[-4.202342510223389,1.101901888847351,-7.044765472412109];e=this.convertVec3fToVector3(e),this.setTranslation(e,0,0),this.sim.setActiveState(0,0)}},{key:"distanceToGoal",value:function(){if(0===Object.keys(this.episode).length||void 0===this.episode.goal)return[0,0];var e=this.episode.goal.position,t=this.getAgentState(),s=t.position,o=[e[0]-s[0],e[1]-s[1],e[2]-s[2]];return o=this.applyRotation(o,t.rotation),this.cartesian_to_polar(-o[2],o[0])}},{key:"applyRotation",value:function(e,t){var s,o,n,a,i,c,r,l=y()(e,3);s=l[0],o=l[1],n=l[2];var _=y()(t,4);a=_[0],i=_[1],c=_[2];var b=(r=_[3])*s-i*n+c*o,d=r*o-c*s+a*n,h=r*n-a*o+i*s,j=a*s+i*o+c*n,u=[];return u[0]=b*r+j*a+d*c-h*i,u[1]=d*r+j*i+h*a-b*c,u[2]=h*r+j*c+b*i-d*a,u}},{key:"cartesian_to_polar",value:function(e,t){return[Math.sqrt(e*e+t*t),Math.atan2(t,e)]}},{key:"createSensorSpec",value:function(e){var t=new Module.SensorSpec;for(var s in e){var o=e[s];t[s]=o}return t}},{key:"createAgentConfig",value:function(e){var t=new Module.AgentConfiguration;for(var s in e){var o=e[s];if("sensorSpecifications"===s){var n,a=new Module.VectorSensorSpec,i=M(o);try{for(i.s();!(n=i.n()).done;){var c=n.value;a.push_back(this.createSensorSpec(c))}}catch(e){i.e(e)}finally{i.f()}o=a}t[s]=o}return t}},{key:"createAgentState",value:function(e){var t=new Module.AgentState;for(var s in e){var o=e[s];t[s]=o}return t}}]),e}(),H=function(){function e(t,s){n()(this,e),this.pathFinder=t,this.bounds=t.bounds,this.canvas=s,this.ctx=s.getContext("2d"),this.widthComponent=0,this.heightComponent=2,this.scale=1,this.ctx.strokeStyle="blue",this.ctx.lineWidth=3,this.currentY=-1/0}return i()(e,[{key:"draw",value:function(){var e=this.ctx,t=this.canvas,s=this.mapCenterInset(),o=y()(s,2),n=o[0],a=o[1];e.clearRect(0,0,t.width,t.height),e.putImageData(this.imageData,n,a)}},{key:"start",value:function(e){this.currentY=e[1],this.imageData=this.createMap(),this.draw();var t=this.convertPosition(e),s=y()(t,2),o=s[0],n=s[1];this.ctx.beginPath(),this.ctx.moveTo(o,n)}},{key:"moveTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0!==t)this.throttledMoveTo||(this.throttledMoveTo=P(this.moveTo.bind(this),t)),this.throttledMoveTo(e);else if(e[1]<this.currentY-.25||e[1]>this.currentY+.25)this.start(e);else{var s=this.convertPosition(e),o=y()(s,2),n=o[0],a=o[1];this.ctx.lineTo(n,a),this.ctx.stroke()}}},{key:"mapCenterInset",value:function(){return[(this.canvas.width-this.imageData.width)/2,(this.canvas.height-this.imageData.height)/2]}},{key:"convertPosition",value:function(e){var t=this.widthComponent,s=this.heightComponent,o=this.mapCenterInset(),n=y()(o,2),a=n[0],i=n[1];return[a+=(e[t]-this.bounds.min[t])*this.scale,i+=(e[s]-this.bounds.min[s])*this.scale]}},{key:"createMap",value:function(){var e=this.canvas,t=this.bounds.max[0]-this.bounds.min[0],s=this.bounds.max[2]-this.bounds.min[2],o=0,n=0;if(t>s&&e.width<e.height||t<s&&e.width>e.height){this.widthComponent=2,this.heightComponent=0;var a=t;t=s,s=a}s/t>e.height/e.width?(this.scale=e.height/s,o=e.height,n=Math.round(t*this.scale-.5)):(this.scale=e.width/t,n=e.width,o=Math.round(s*this.scale-.5));var i,c,r=new ImageData(n,o),l=4*e.width,_=1/this.scale,b=this.bounds.min[this.heightComponent]+_/2;for(i=0;i<o;i++){var d=this.bounds.min[this.widthComponent]+_/2;for(c=0;c<n;c++){var h=[0,this.currentY,0];h[this.widthComponent]=d,h[this.heightComponent]=b,this.pathFinder.isNavigable(h,.5)&&(r.data[i*l+4*c]=255,r.data[i*l+4*c+1]=255,r.data[i*l+4*c+2]=255,r.data[i*l+4*c+3]=255),d+=_}b+=_}return r}}]),e}(),B=function(){function e(t,s,o,a){n()(this,e),this.rect=t,this.semanticShape=s,this.semanticScene=o,this.objectIds=[];for(var i=this.semanticScene.categories,c=this.semanticScene.objects,r=-1,l=0;l<i.size();l++){var _=i.get(l);if(_&&_.getName("")===a){r=_.getIndex("");break}}for(var b=0;b<c.size();b++){var d=c.get(b)||{};d.category&&d.category.getIndex("")===r&&this.objectIds.push(b)}}return i()(e,[{key:"computeIOU",value:function(e){for(var t=this.semanticShape.get(1),s=this.semanticShape.get(0),o=this.rect.left,n=this.rect.top,a=this.rect.right,i=this.rect.bottom,c=0,r=0,l=!1,_=0;_<s;_++){l=_>=n&&_<i;for(var b=0;b<t;b++)this.objectIds.includes(e[_*t+b])&&(l&&b>=o&&b<a?c++:r++)}return 0===c?0:c/(r+(i-n)*(a-o))}}]),e}(),D=function(){function e(t){n()(this,e),this.inventorySlots=t,this.inventory=new Array(t),this.inventoryComponent=null,this.inventoryEnabled=!1,this.inventoryCtx=null}return i()(e,[{key:"reset",value:function(){this.inventory=new Array(this.inventorySlots)}},{key:"initInventory",value:function(e){this.inventoryComponent=e,this.inventoryEnabled=!0,this.inventoryCtx=e.getContext("2d")}},{key:"setSlot",value:function(e,t){this.inventory[e]=t}},{key:"getSlot",value:function(e){return this.inventory[e]}},{key:"getEmptySlot",value:function(){for(var e=0;e<this.inventorySlots;e++)if(void 0===this.inventory[e])return e;return-1}},{key:"findObjectSlot",value:function(e){for(var t=0;t<this.inventorySlots;t++)if(void 0!==this.inventory[t]&&this.inventory[t].objectId===e)return t;return-1}},{key:"renderInventory",value:function(){var e=this;if(this.inventoryEnabled){var t=80*this.inventorySlots;""===this.inventoryComponent.style.border&&(this.inventoryComponent.style.border="5px solid #000000",this.inventoryComponent.width=t.toString());var s=this.inventoryCtx;s.clearRect(0,0,t,80),s.fillStyle="darkslategray";for(var o=function(t){var o=2+78*t;s.beginPath(),s.strokeStyle="grey",s.lineWidth=5,s.rect(o,2,76,76),s.stroke(),s.closePath();if(void 0!==e.inventory[t]){var n=new Image;n.src=e.inventory[t].objectIcon,n.addEventListener("load",(function(){s.drawImage(n,o+2,4,72,72)}))}},n=0;n<this.inventorySlots;++n)o(n)}}}]),e}(),F=function(){function e(t,s){n()(this,e),this.episode=t,this.sim=s,this.task=this.episode.task}return i()(e,[{key:"validate",value:function(){return void 0===this.task||("arrangement"===this.task.type?this.validateArrangementTask():"stacking"===this.task.type?this.validateStackingTask():void 0)}},{key:"validateArrangementTask",value:function(){var e=this.task.goals;if(void 0===e||void 0===e.objectToReceptacleMap)return!0;if(-1!=this.sim.grippedObjectId)return!1;var t=e.objectToReceptacleMap,s=this.sim.getObjectsInScene(),o=!1,n=this.sim.episode.objects;for(var a in n){var i=n[a].objectId,c=n[a].position,r=this.sim.convertVector3ToVec3f(this.sim.getTranslation(i,0));this.sim.geodesicDistance(c,r)>0&&(o=!0)}for(var l in t){for(var _=s[parseInt(l)].objectId,b=this.sim.convertVector3ToVec3f(this.sim.getTranslation(_,0)),d=t[l],h=!1,j=0;j<d.length;j++){var u=s[d[j]].objectId,g=this.sim.convertVector3ToVec3f(this.sim.getTranslation(u,0)),p=this.sim.geodesicDistance(b,g),f=g[1]+this.sim.getObjectBBYCoord(u);p<=.7&&b[1]>f&&(h=!0)}if(!h)return!1}return o}},{key:"validateStackingTask",value:function(){}}]),e}();function x(e,t){var s;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==s.return||s.return()}finally{if(c)throw a}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,o=new Array(t);s<t;s++)o[s]=e[s];return o}var W=function(){function e(t,s){var o=this;if(n()(this,e),this.sim=t,this.components=s,this.topdown=s.topdown,this.semanticsEnabled=!1,this.radarEnabled=!1,this.keyBindListener=null,this.lastInteractedObjectId=-1,this.inventory=new D(1),this.taskValidator=null,this.components.semantic){if(this.semanticsEnabled=!0,this.semanticCtx=s.semantic.getContext("2d"),this.semanticShape=this.sim.getObservationSpace("semantic").shape,this.semanticImageData=this.semanticCtx.createImageData(this.semanticShape.get(1),this.semanticShape.get(0)),this.semanticObservation=new Module.Observation,this.semanticScene=this.sim.sim.getSemanticScene(),this.semanticObjects=this.semanticScene.objects,window.config.category){var a=this.components.scope.offsetWidth,i=this.components.scope.offsetHeight,c=(this.components.canvas.width-a)/2,r=(this.components.canvas.height-i)/2,l={left:c,top:r,right:c+a,bottom:r+i};this.objectSensor=new B(l,this.semanticShape,this.semanticScene,window.config.category)}s.canvas.onmousedown=function(e){o.handleMouseDown(e)}}this.components.radar&&(this.radarEnabled=!0,this.radarCtx=s.radar.getContext("2d")),this.components.inventory&&this.inventory.initInventory(s.inventory),this.components.taskValidator&&(this.taskValidator=this.components.taskValidator),this.psiturk=new C(window.psiTurk),this.actions=[{name:"moveForward",key:"w",keyCode:87},{name:"moveBackward",key:"s",keyCode:83},{name:"turnLeft",key:"ArrowLeft",keyCode:37},{name:"turnRight",key:"ArrowRight",keyCode:39},{name:"turnLeft",key:"a",keyCode:65},{name:"turnRight",key:"d",keyCode:68},{name:"lookUp",key:"ArrowUp",keyCode:38},{name:"lookDown",key:"ArrowDown",keyCode:40},{name:"grabReleaseObject",key:" ",keyCode:32}]}return i()(e,[{key:"handleMouseDown",value:function(e){var t=this.semanticShape.get(0),s=this.semanticShape.get(1),o=t-1-e.offsetY,n=e.offsetX,a=this.semanticData[s*o+n];this.setStatus(this.semanticObjects.get(a).category.getName(""))}},{key:"init",value:function(){this.bindKeys(),this.psiturk.handleRecordTrialData("TEST","simInitialized",{config:window.config}),this.initialized=!0,this.initPhysics()}},{key:"initPhysics",value:function(){var e=this;this.activeActions=[],this.activeActionIdx=0,this.frameCounter=0,Module.enablePhysics&&!0!==window.config.runFlythrough&&!0===window.config.enableStepPhysics&&(console.log("enabled physics step at 100ms interval"),this.physicsStepFunction=setInterval((function(){var t=e.popAction();"noOp"!=t&&e.handleAction(t);var s=(new Date).getTime();e.sim.stepWorld(.05),e.render();var o=e.sim.getAgentPose(),n=e.sim.getObjectStates(),a=e.sim.getObjectUnderCrosshair().nearestObjectId,i=[];-1!=e.sim.grippedObjectId&&(i=e.sim.findObjectFloorPositionUnderCrosshair(),i=e.sim.convertVector3ToVec3f(i)),e.psiturk.handleRecordTrialData("TEST","stepPhysics",{step:.05,agentState:o,objectStates:n,objectUnderCrosshair:a,objectDropPoint:i,totalTime:(new Date).getTime()-s}),e.frameCounter+=1}),50))}},{key:"disablePhysics",value:function(){this.physicsStepFunction&&(console.log("clearing physics interval on reset"),window.clearInterval(this.physicsStepFunction))}},{key:"reset",value:function(){this.lastInteractedObjectId=-1,this.disablePhysics(),this.sim.reset(),this.inventory.reset(),this.inventory.renderInventory(),this.setStatus("Ready"),this.initPhysics(),this.render()}},{key:"runFlythrough",value:function(e){var t=this;this.setStatus("Initializing...");var s=this;this.psiturk.handleRecordTrialData("TEST","flythroughStart",{});var o=!!this.keyBindListener;this.unbindKeys();var n=FS.readFile("/data/".concat(e),{encoding:"utf8"}).split(/\r?\n/),a=null,i=0,c=!1;this.replayTimeouts=[];for(var r=function(e){var o=n[e];if(0===o.length)return"continue";var r=o.split(","),l=r.slice(0,3)[2],_=r.slice(3).join(",");'"'==_[0]&&'"'==_[_.length-1]&&(_=function(e,t,s){for(;-1!==e.indexOf(t);)e=e.replace(t,s);return e}(_=_.slice(1,_.length-1),'""','"'));var b=JSON.parse(_);if(!1===c){if("viewer"!==b.step)return"continue";c=!0}a||(a=l);var d=(l-a)/1,h=window.setTimeout((function(){"simReset"===b.event?s.reset():"handleAction"==b.event?s.handleAction(b.data.action):"stepPhysics"==b.event&&(s.sim.stepWorld(.1),s.render())}),d);t.replayTimeouts.push(h),i=d},l=0;l<n.length;++l)r(l);this.clearTimeouts=function(){if(this.clearTimeouts=null,this.replayTimeouts){for(var e=0;e<this.replayTimeouts.length;++e){var t=this.replayTimeouts[e];window.clearTimeout(t)}delete this.replayTimeouts}o&&s.bindKeys(),s.setStatus("")};var _=window.setTimeout((function(){"function"==typeof this.clearTimeouts&&this.clearTimeouts(),window.finishTrial()}),i+1);this.replayTimeouts.push(_),this.psiturk.handleRecordTrialData("TEST","flythroughEnd",{})}},{key:"setTaskValidator",value:function(e){this.taskValidator=new F(e,this.sim)}},{key:"setStatus",value:function(e){this.components.status.style="color:white",this.components.status.innerHTML=e}},{key:"setErrorStatus",value:function(e){this.components.status.style="color:red",this.components.status.innerHTML=e}},{key:"setWarningStatus",value:function(e){this.components.status.style="color:orange",this.components.status.innerHTML=e}},{key:"setSuccessStatus",value:function(e){this.components.status.style="color:green",this.components.status.innerHTML=e}},{key:"renderImage",value:function(){this.sim.displayObservation("rgb"),this.renderRadar()}},{key:"renderSemanticImage",value:function(){if(this.semanticsEnabled&&0!=this.semanticObjects.size()){this.sim.getObservation("semantic",this.semanticObservation);var e=this.semanticObservation.getData(),t=new Uint32Array(e.buffer,e.byteOffset,e.length/4);this.semanticData=t;for(var s=0;s<t.length;s++){var o=t[s];this.semanticImageData.data[4*s]=1&o?255:0,this.semanticImageData.data[4*s+1]=2&o?255:0,this.semanticImageData.data[4*s+2]=4&o?255:0,this.semanticImageData.data[4*s+3]=255}this.semanticCtx.putImageData(this.semanticImageData,0,0)}}},{key:"renderTopDown",value:function(e){e.renderTopDown&&null!==this.topdown&&this.topdown.moveTo(this.sim.getAgentState().position,500)}},{key:"renderRadar",value:function(){if(this.radarEnabled){var e,t,s=this.radarCtx;s.clearRect(0,0,100,100),s.globalAlpha=.5,s.fillStyle="darkslategray",s.arc(50,50,50,0,2*Math.PI),s.fill(),s.fillStyle="darkgray",s.beginPath(),s.arc(50,50,50,3*-Math.PI/4,-Math.PI/4),s.lineTo(50,50),s.closePath(),s.fill(),s.globalAlpha=1,s.beginPath();var o=this.sim.distanceToGoal(),n=y()(o,2);e=n[0],t=n[1];var a=e/(e+1),i=50+50*Math.sin(t)*a,c=50-50*Math.cos(t)*a;s.fillStyle="maroon",s.arc(i,c,3,0,2*Math.PI),s.fill()}}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{renderTopDown:!0};this.renderImage(),this.sim.updateCrossHairNode(this.sim.getCrosshairPosition()),this.sim.drawBBAroundNearestObject(),this.sim.showDropPoint(),this.renderImage(),this.renderSemanticImage(),this.renderTopDown(e),this.numRendersSinceLastUpdate+=1}},{key:"handleInventoryUpdate",value:function(e){var t=this.sim.grippedObjectId;if(e)this.setStatus("Collision while releasing object!");else{if(-1==t){var s=this.inventory.findObjectSlot(this.lastInteractedObjectId);if(-1!=s&&this.inventory.setSlot(s,void 0),-1!=this.lastInteractedObjectId){var o=this.sim.getObjectFromScene(this.lastInteractedObjectId);this.setStatus(o.object+" released")}}else{var n=this.inventory.getEmptySlot(),a=this.sim.getObjectFromScene(t);-1==n?console.log("No empty slot in inventory!"):(this.inventory.setSlot(n,{objectId:t,object:a.object,objectIcon:a.objectIcon}),this.setStatus(a.object+" picked up"))}this.lastInteractedObjectId=t}}},{key:"validateTask",value:function(){return!window.config.runFlythrough&&this.taskValidator.validate()}},{key:"pushAction",value:function(e){0==this.activeActions.length&&this.activeActions.push(e)}},{key:"popAction",value:function(){if(this.activeActions.length>0){this.activeActionIdx=0;var e=this.activeActions[this.activeActionIdx];return"grabReleaseObject"==e&&this.removeActiveAction(e),e}return"noOp"}},{key:"handleAction",value:function(e){var t={},s=!1;if("addPrimitiveObject"===e)this.sim.addPrimitiveObject();else if("addTemplateObject"===e)this.sim.addTemplateObject();else if("removeLastObject"===e)this.sim.removeLastObject();else if("grabReleaseObject"==e){var o=this.sim.inventoryGrabReleaseObject();this.handleInventoryUpdate(o.collision),this.inventory.renderInventory(),t=o}else if("agentPose"==e){this.sim.stepWorld(.05)}else"stepWorld"==e?this.sim.stepWorld(.1):"dropObject"==e?(this.sim.dropObjectFromFloor2(),this.dropCalled=!0):(s=this.sim.step(e),this.setStatus(e));var n=this.sim.getAgentPose(),a=this.sim.getObjectStates(),i=this.sim.getObjectUnderCrosshair().nearestObjectId,c=[];-1!=this.sim.grippedObjectId&&(c=this.sim.findObjectFloorPositionUnderCrosshair(),c=this.sim.convertVector3ToVec3f(c)),this.psiturk.handleRecordTrialData("TEST","handleAction",{action:e,actionData:t,collision:s,objectUnderCrosshair:i,nearestObjectId:this.sim.nearestObjectId,grippedObjectId:this.sim.grippedObjectId,objectDropPoint:c,agentState:n,objectStates:a})}},{key:"removeActiveAction",value:function(e){var t=this.activeActions.indexOf(e);t>-1&&this.activeActions.splice(t,1)}},{key:"handleKeypressUp",value:function(e){var t,s=x(this.actions);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(o.keyCode===e){this.removeActiveAction(o.name);break}}}catch(e){s.e(e)}finally{s.f()}}},{key:"handleKeypress",value:function(e){var t,s=x(this.actions);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(o.keyCode===e){this.pushAction(o.name);break}}}catch(e){s.e(e)}finally{s.f()}}},{key:"bindKeys",value:function(){var e=this;e.keyBindListener?console.log("Keys already bound. Returning"):(e.keyBindListener=function(t){t.preventDefault(),e.handleKeypress(t.keyCode)},document.addEventListener("keydown",e.keyBindListener,!0),e.keyBindListener2=function(t){t.preventDefault(),e.handleKeypressUp(t.keyCode)},document.addEventListener("keyup",e.keyBindListener2,!0))}},{key:"unbindKeys",value:function(){this.keyBindListener&&(document.removeEventListener("keydown",this.keyBindListener,!0),this.keyBindListener=null,document.removeEventListener("keyup",this.keyBindListener2,!0),this.keyBindListener2=null)}}]),e}();function V(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function L(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?V(Object(s),!0).forEach((function(t){r()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):V(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"canvas";n()(this,e),r()(this,"currentResolution",b),this.canvasId=t}return i()(e,[{key:"initializeModules",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.config=new Module.SimulatorConfiguration,this.config.scene_id=Module.scene,this.config.enablePhysics=Module.enablePhysics,this.config.physicsConfigFile=Module.physicsConfigFile,this.simenv=new R(this.config,t,0),e=this.updateAgentConfigWithSensors(L({},e)),this.simenv.addAgent(e),this.simenv.updateCrossHairNode(this.simenv.resolution),this.topdown=s?new H(this.simenv.getPathFinder(),document.getElementById("topdown")):null,this.canvasElement=document.getElementById(this.canvasId),this.taskValidator=new F(t,this.simenv),this.task=new W(this.simenv,{topdown:this.topdown,canvas:this.canvasElement,inventory:document.getElementById("inventory"),semantic:document.getElementById("semantic"),radar:document.getElementById("radar"),scope:document.getElementById("scope"),status:document.getElementById("status"),fps:document.getElementById("fps"),taskValidator:this.taskValidator})}},{key:"setEpisode",value:function(e){var t=document.getElementById("task-instruction"),s=document.getElementById("text-assistance-1");if(null!=t&&(t.innerHTML="<hr> <h1>Task: "+e.task.instruction+"</h1> <hr>"),null!=s){var o=function(e){for(var t=e.objects,s={objects:[],receptacles:[]},o=0;o<t.length;o++){var n=t[o],a=n.object;a=a.charAt(0).toUpperCase()+a.slice(1);var i="<div><img src='"+n.objectIcon+"' style='border: 3px solid grey'/><div class='img-caption'>"+a+"</div></div>";n.isReceptacle?s.receptacles.push(i):s.objects.push(i)}return s}(e);o.objects.length>0&&o.receptacles.length>0&&(s.innerHTML="<div class='object-type'> Object: </div> <ul>"+o.objects.join("\n")+"</ul><br/><div class='object-type'> Receptacle: </div> <ul>"+o.receptacles.join("\n")+"</ul>")}this.simenv.setEpisode(e)}},{key:"setTaskValidator",value:function(e){this.task.setTaskValidator(e)}},{key:"runFlythrough",value:function(){window.config.disableLogging=!0,window.config.runFlythrough=!0,window.config.enableStepPhysics=!1,window.config.actualTask=!1;var e=window.config.taskConfig.flythroughTask.name,t=window.config.taskConfig.flythroughReplayFile.name,s=O("/data/".concat(e));this.setEpisode(s),this.setTaskValidator(s),this.task.reset(),this.task.runFlythrough(t)}},{key:"runInit",value:function(){window.config.disableLogging=!1,window.config.runFlythrough=!1,window.config.enableStepPhysics=!0,window.config.actualTask=!0;var e=window.config.episodeId,t=O("/data/".concat(window.config.taskConfig.name),e);this.setEpisode(t),this.setTaskValidator(t),this.task.reset()}},{key:"runTrainingTask",value:function(){window.config.disableLogging=!0,window.config.runFlythrough=!1,window.config.enableStepPhysics=!0,window.config.actualTask=!1;var e=window.config.taskConfig.trainingTask.name,t=O("/data/".concat(e));this.setEpisode(t),this.setTaskValidator(t),this.task.reset()}},{key:"updateAgentConfigWithSensors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=[{uuid:"rgb",sensorType:Module.SensorType.COLOR,resolution:[480,640]},{uuid:"semantic",sensorType:Module.SensorType.SEMANTIC,resolution:[480,640],channels:1}];return e.sensorSpecifications=t,e=this.updateAgentConfigWithResolution(e)}},{key:"resetCanvas",value:function(e){this.canvasElement.width=e.width,this.canvasElement.height=e.height}},{key:"updateAgentConfigWithResolution",value:function(e){var t=this;return e.sensorSpecifications.forEach((function(e){e.resolution=[t.currentResolution.height,t.currentResolution.width]})),e}},{key:"display",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=T();s.useDefaultEpisode&&(t=_),this.initializeModules(e,t),this.task.init(),this.task.reset()}},{key:"validateTask",value:function(){this.task.validateTask()}}]),e}(),U=s(2),N=s.n(U),G=s(6),q=s.n(G),Q=s(7),K=s.n(Q),Y=s(8),J=s.n(Y),X=s(5),$=s.n(X);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=$()(e);if(t){var n=$()(this).constructor;s=Reflect.construct(o,arguments,n)}else s=o.apply(this,arguments);return J()(this,s)}}var ee=function(e){K()(s,e);var t=Z(s);function s(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"canvas",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fps";return n()(this,s),e=t.call(this),r()(N()(e),"normalSceneFrame",void 0),r()(N()(e),"vrSceneFrame",void 0),r()(N()(e),"fpsElement",void 0),r()(N()(e),"lastPaintTime",void 0),r()(N()(e),"frameData",new VRFrameData),r()(N()(e),"previousRotation",!1),r()(N()(e),"previousPosition",!1),r()(N()(e),"currentVrDisplay",!1),r()(N()(e),"fps",0),r()(N()(e),"skipFrames",60),r()(N()(e),"currentFramesSkipped",0),e.canvasElement=document.getElementById(o),e.fpsElement=document.getElementById(a),e}return i()(s,[{key:"display",value:function(){this.setUpVR()}},{key:"initializeModules",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];q()($()(s.prototype),"initializeModules",this).call(this,e,t,o)}},{key:"setUpVR",value:function(){var e=this;navigator.getVRDisplays().then((function(t){t.length>0?e.setupDisplay(t[0]):(console.log("VR display not supported by this device"),q()($()(s.prototype),"display",e).call(e))}))}},{key:"setupDisplay",value:function(e){var t=this;this.currentVrDisplay=e,this.currentVrDisplay.requestPresent([{source:this.canvasElement}]).then((function(){return t.setupCanvas()})).then((function(){return t.initializeModules()})).then((function(){return t.renderDisplay()}))}},{key:"renderDisplay",value:function(){this.task.reset(),this.drawVRScene()}},{key:"setupCanvas",value:function(){var e=this.currentVrDisplay.getEyeParameters("left"),t=this.currentVrDisplay.getEyeParameters("right"),s=2*Math.max(e.renderWidth,t.renderWidth),o=Math.max(e.renderHeight,t.renderHeight);this.currentResolution={height:o,width:s},this.resetCanvas(this.currentResolution)}},{key:"drawVRScene",value:function(){this.vrSceneFrame=this.currentVrDisplay.requestAnimationFrame(this.drawVRScene.bind(this)),this.currentVrDisplay.getFrameData(this.frameData),this.updateAgentState(),this.task.render({renderTopDown:!1}),this.currentVrDisplay.submitFrame(),this.updateFPS()}},{key:"updateAgentState",value:function(){var e=this,t=this.simenv.sim.getAgent(this.simenv.selectedAgentId),s=this.simenv.createAgentState({});t.getState(s);var o=s.rotation.slice(),n=s.position.slice();if(this.previousRotation){var a=this.frameData.pose.orientation,i=this.frameData.pose.position;a.forEach((function(t,s){o[s]+=t-e.previousRotation[s]})),i.forEach((function(t,s){n[s]+=t-e.previousPosition[s]})),this.previousRotation=a.slice(),this.previousPosition=i.slice()}else this.previousRotation=this.frameData.pose.orientation.slice(),this.previousPosition=this.frameData.pose.position.slice();var c={position:n,rotation:o};c=this.simenv.createAgentState(c),t.setState(c,!0)}},{key:"updateFPS",value:function(){if(this.currentFramesSkipped==this.skipFrames)if(this.currentFramesSkipped=0,this.lastPaintTime){var e=performance.now(),t=(e-this.lastPaintTime)/1e3;this.fps=this.skipFrames/t,this.lastPaintTime=e,this.fpsElement.innerHTML="FPS: ".concat(this.fps.toFixed(2))}else this.lastPaintTime=performance.now();else this.currentFramesSkipped++}}]),s}(z);s(19);function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=$()(e);if(t){var n=$()(this).constructor;s=Reflect.construct(o,arguments,n)}else s=o.apply(this,arguments);return J()(this,s)}}var se=function(e){K()(s,e);var t=te(s);function s(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"canvas";return n()(this,s),(e=t.call(this,o)).canvasElement=document.getElementById(o),window.addEventListener("resize",e.windowResizeEvent.bind(N()(e))),e}return i()(s,[{key:"initializeModules",value:function(){for(var e,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];3===o.length?o[2]=!1:2==o.length&&o.push(!1),(e=q()($()(s.prototype),"initializeModules",this)).call.apply(e,[this].concat(o))}},{key:"resetCanvasToCurrent",value:function(){this.currentResolution={height:this.canvasElement.offsetHeight,width:this.canvasElement.offsetWidth},this.resetCanvas(this.currentResolution)}},{key:"display",value:function(){this.resetCanvasToCurrent(),q()($()(s.prototype),"display",this).call(this)}},{key:"windowResizeEvent",value:function(){}}]),s}(z);s(21);function oe(e){var t=e;if(0===e.indexOf("http")){var s=e.split("/");t=s[s.length-1]}return FS.createPreloadedFile("/",t,"data/scenes/".concat(e),!0,!1),t}function ne(e,t){FS.createPreloadedFile("/data",e.name,"data/".concat(e.config),!0,!1),FS.createPreloadedFile("/data",t.name,"data/".concat(t.location),!0,!1)}Module.preRun.push((function(){for(var e=decodeURIComponent(window.location.search.substr(1)).trim().split("&"),t=0;t!=e.length;++t){var s=e[t].indexOf("=");-1!=s?(Module.arguments.push("--"+e[t].substring(0,s)),Module.arguments.push(e[t].substring(s+1))):Module.arguments.push("--"+e[t])}var o={};o.scene=d,T(o),window.config=o;var n=p.tasks[parseInt(window.config.task)];window.config.taskConfig=n,void 0!==n&&(o.scene=n.scene,window.config.scene=n.scene);var a=o.scene;Module.scene=oe(a);var i=window.config.defaultPhysConfig;Module.physicsConfigFile=function(e){FS.mkdir("/data");var t=e;if(0===e.indexOf("http")){var s=e.split("/");t=s[s.length-1]}FS.createPreloadedFile("/data",t,"data/".concat(e),!0,!1);var o="/data".concat("/objects");FS.mkdir(o);var n=j.objects;for(var a in n){var i=n[a].physicsProperties,c=i.split("/")[i.split("/").length-1],r=n[a].renderMesh,l=r.split("/")[r.split("/").length-1];FS.createPreloadedFile(o,l,"data/".concat(r),!0,!1),FS.createPreloadedFile(o,c,"data/".concat(i),!0,!1)}return"/data".concat("/".concat(t))}(i),Module.enablePhysics="true"===window.config.enablePhysics,window.config.runFlythrough="true"===window.config.runFlythrough,window.config.enableStepPhysics="true"===window.config.enableStepPhysics,function(e){if(void 0!==e){var t=e.name,s=e.config;FS.createPreloadedFile("/data",t,"data/".concat(s),!0,!1),FS.createPreloadedFile("/data",e.trainingTask.name,"data/".concat(e.trainingTask.config),!0,!1)}}(n),null!=n?ne(n.flythroughTask,n.flythroughReplayFile):ne(u,g);var c=a.substr(0,a.lastIndexOf("."));window.config.recomputeNavMesh||(oe(c+".navmesh"),oe(c+".stage_config.json")),"mp3d"===o.semantic?(oe(c+".house"),oe(c+"_semantic.ply")):"replica"===o.semantic&&oe(function(e){var t=e.split("/"),s=t.length>1;t.pop();var o="info_semantic.json";return s&&(o="/"+o),t.join("/")+o}(o.scene))})),Module.onRuntimeInitialized=function(){var e;if(console.log("hsim_bindings initialized"),window.vrEnabled?navigator&&navigator.getVRDisplays&&(console.log("Web VR is supported"),e=new ee):window.viewerEnabled&&(e=new se),e||(e=new z),void 0!==window.config.taskConfig){var t=O("/data/".concat(window.config.taskConfig.name),window.config.episodeId);e.display(void 0,t)}else e.display();!0===window.config.runFlythrough&&e.runFlythrough(),window.demo=e},function(){var e=function(){var e,t,s=!1;try{t=(e=document.createElement("canvas")).getContext("webgl")||e.getContext("experimental-webgl")}catch(e){return}return void 0!==t&&(s=!0),e=void 0,s?2:"undefined"!=typeof WebGL2RenderingContext?1:0}(),t="";if(e?1===e&&(t="WebGL2 is supported on your browser, but not enabled. "):t="WebGL2 is not supported on your browser. ",function(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":v()(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){return!1}return!1}()||(t+="Web Assembly is not supported in your browser"),t.length>0){var s=document.getElementById("warning");s.innerHTML=t,s.className=""}}()}]);
//# sourceMappingURL=bundle.js.map